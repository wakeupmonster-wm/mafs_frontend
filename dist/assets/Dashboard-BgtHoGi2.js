import{c as me,r as c,j as e,a as x,b as W,u as E,d as ge,R as b,I as he,e as H,f as ve,g as fe,h as xe,i as _,k as ye,l as M,C as P,m as T,n as D,o as A,p as R,q as be,s as je,t as we,v as Ce,w as Ne,x as Pe,y as Te,z as O,B as ke,A as Ie}from"./index-Cah9GgNi.js";import{T as K,R as X,A as Se,C as De,X as Ae,a as F,P as Re,b as Le,c as Ue}from"./AreaChart-DPw3i69U.js";import{S as Ee,a as _e,b as Me,c as Ge,d as L}from"./select-DxUcbfzd.js";import{I as z}from"./IconAlertTriangle-BfTXxp-v.js";import{I as $e}from"./IconCrown-BKCnjhBO.js";import{I as Ve}from"./IconTrendingUp-BtAa9n7n.js";const Oe=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h3.5",key:"svg-1"}],["path",{d:"M22 22l-5 -5",key:"svg-2"}],["path",{d:"M17 22l5 -5",key:"svg-3"}]],Fe=me("outline","user-x","UserX",Oe),ze={light:"",dark:".dark"},q=c.createContext(null);function Z(){const t=c.useContext(q);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const Q=c.forwardRef(({id:t,className:r,children:n,config:s,...a},o)=>{const l=c.useId(),i=`chart-${t||l.replace(/:/g,"")}`;return e.jsx(q.Provider,{value:{config:s},children:e.jsxs("div",{"data-chart":i,ref:o,className:x("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",r),...a,children:[e.jsx(Be,{id:i,config:s}),e.jsx(X,{children:n})]})})});Q.displayName="Chart";const Be=({id:t,config:r})=>{const n=Object.entries(r).filter(([,s])=>s.theme||s.color);return n.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(ze).map(([s,a])=>`
${a} [data-chart=${t}] {
${n.map(([o,l])=>{const i=l.theme?.[s]||l.color;return i?`  --color-${o}: ${i};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Je=K,Y=c.forwardRef(({active:t,payload:r,className:n,indicator:s="dot",hideLabel:a=!1,hideIndicator:o=!1,label:l,labelFormatter:i,labelClassName:d,formatter:p,color:v,nameKey:u,labelKey:g},f)=>{const{config:h}=Z(),y=c.useMemo(()=>{if(a||!r?.length)return null;const[m]=r,N=`${g||m?.dataKey||m?.name||"value"}`,S=U(h,m,N),C=!g&&typeof l=="string"?h[l]?.label||l:S?.label;return i?e.jsx("div",{className:x("font-medium",d),children:i(C,r)}):C?e.jsx("div",{className:x("font-medium",d),children:C}):null},[l,i,r,a,d,h,g]);if(!t||!r?.length)return null;const j=r.length===1&&s!=="dot";return e.jsxs("div",{ref:f,className:x("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:y,e.jsx("div",{className:"grid gap-1.5",children:r.filter(m=>m.type!=="none").map((m,N)=>{const S=`${u||m.name||m.dataKey||"value"}`,C=U(h,m,S),V=v||m.payload.fill||m.color;return e.jsx("div",{className:x("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",s==="dot"&&"items-center"),children:p&&m?.value!==void 0&&m.name?p(m.value,m.name,m,N,m.payload):e.jsxs(e.Fragment,{children:[C?.icon?e.jsx(C.icon,{}):!o&&e.jsx("div",{className:x("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":s==="dot","w-1":s==="line","w-0 border-[1.5px] border-dashed bg-transparent":s==="dashed","my-0.5":j&&s==="dashed"}),style:{"--color-bg":V,"--color-border":V}}),e.jsxs("div",{className:x("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[j?y:null,e.jsx("span",{className:"text-muted-foreground",children:C?.label||m.name})]}),m.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:m.value.toLocaleString()})]})]})},m.dataKey)})})]})});Y.displayName="ChartTooltip";const We=c.forwardRef(({className:t,hideIcon:r=!1,payload:n,verticalAlign:s="bottom",nameKey:a},o)=>{const{config:l}=Z();return n?.length?e.jsx("div",{ref:o,className:x("flex items-center justify-center gap-4",s==="top"?"pb-3":"pt-3",t),children:n.filter(i=>i.type!=="none").map(i=>{const d=`${a||i.dataKey||"value"}`,p=U(l,i,d);return e.jsxs("div",{className:x("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[p?.icon&&!r?e.jsx(p.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:i.color}}),p?.label]},i.value)})}):null});We.displayName="ChartLegend";function U(t,r,n){if(typeof r!="object"||r===null)return;const s="payload"in r&&typeof r.payload=="object"&&r.payload!==null?r.payload:void 0;let a=n;return n in r&&typeof r[n]=="string"?a=r[n]:s&&n in s&&typeof s[n]=="string"&&(a=s[n]),a in t?t[a]:t[n]}function He(t,r=[]){let n=[];function s(o,l){const i=c.createContext(l),d=n.length;n=[...n,l];const p=u=>{const{scope:g,children:f,...h}=u,y=g?.[t]?.[d]||i,j=c.useMemo(()=>h,Object.values(h));return e.jsx(y.Provider,{value:j,children:f})};p.displayName=o+"Provider";function v(u,g){const f=g?.[t]?.[d]||i,h=c.useContext(f);if(h)return h;if(l!==void 0)return l;throw new Error(`\`${u}\` must be used within \`${o}\``)}return[p,v]}const a=()=>{const o=n.map(l=>c.createContext(l));return function(i){const d=i?.[t]||o;return c.useMemo(()=>({[`__scope${t}`]:{...i,[t]:d}}),[i,d])}};return a.scopeName=t,[s,Ke(a,...r)]}function Ke(...t){const r=t[0];if(t.length===1)return r;const n=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((i,{useScope:d,scopeName:p})=>{const u=d(o)[`__scope${p}`];return{...i,...u}},{});return c.useMemo(()=>({[`__scope${r.scopeName}`]:l}),[l])}};return n.scopeName=r.scopeName,n}function Xe(t){const r=qe(t),n=c.forwardRef((s,a)=>{const{children:o,...l}=s,i=c.Children.toArray(o),d=i.find(Qe);if(d){const p=d.props.children,v=i.map(u=>u===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:u);return e.jsx(r,{...l,ref:a,children:c.isValidElement(p)?c.cloneElement(p,void 0,v):null})}return e.jsx(r,{...l,ref:a,children:o})});return n.displayName=`${t}.Slot`,n}function qe(t){const r=c.forwardRef((n,s)=>{const{children:a,...o}=n;if(c.isValidElement(a)){const l=et(a),i=Ye(o,a.props);return a.type!==c.Fragment&&(i.ref=s?W(s,l):l),c.cloneElement(a,i)}return c.Children.count(a)>1?c.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Ze=Symbol("radix.slottable");function Qe(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ze}function Ye(t,r){const n={...r};for(const s in r){const a=t[s],o=r[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const d=o(...i);return a(...i),d}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...t,...n}}function et(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B=tt.reduce((t,r)=>{const n=Xe(`Primitive.${r}`),s=c.forwardRef((a,o)=>{const{asChild:l,...i}=a,d=l?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...t,[r]:s}},{});function rt(t){const r=at(t),n=c.forwardRef((s,a)=>{const{children:o,...l}=s,i=c.Children.toArray(o),d=i.find(nt);if(d){const p=d.props.children,v=i.map(u=>u===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:u);return e.jsx(r,{...l,ref:a,children:c.isValidElement(p)?c.cloneElement(p,void 0,v):null})}return e.jsx(r,{...l,ref:a,children:o})});return n.displayName=`${t}.Slot`,n}function at(t){const r=c.forwardRef((n,s)=>{const{children:a,...o}=n;if(c.isValidElement(a)){const l=ot(a),i=it(o,a.props);return a.type!==c.Fragment&&(i.ref=s?W(s,l):l),c.cloneElement(a,i)}return c.Children.count(a)>1?c.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var st=Symbol("radix.slottable");function nt(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===st}function it(t,r){const n={...r};for(const s in r){const a=t[s],o=r[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const d=o(...i);return a(...i),d}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...t,...n}}function ot(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ct=lt.reduce((t,r)=>{const n=rt(`Primitive.${r}`),s=c.forwardRef((a,o)=>{const{asChild:l,...i}=a,d=l?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...t,[r]:s}},{}),ee="Toggle",G=c.forwardRef((t,r)=>{const{pressed:n,defaultPressed:s,onPressedChange:a,...o}=t,[l,i]=E({prop:n,onChange:a,defaultProp:s??!1,caller:ee});return e.jsx(ct.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:r,onClick:ge(t.onClick,()=>{t.disabled||i(!l)})})});G.displayName=ee;var te=G,w="ToggleGroup",[re]=He(w,[H]),ae=H(),$=b.forwardRef((t,r)=>{const{type:n,...s}=t;if(n==="single"){const a=s;return e.jsx(dt,{...a,ref:r})}if(n==="multiple"){const a=s;return e.jsx(ut,{...a,ref:r})}throw new Error(`Missing prop \`type\` expected on \`${w}\``)});$.displayName=w;var[se,ne]=re(w),dt=b.forwardRef((t,r)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},...o}=t,[l,i]=E({prop:n,defaultProp:s??"",onChange:a,caller:w});return e.jsx(se,{scope:t.__scopeToggleGroup,type:"single",value:b.useMemo(()=>l?[l]:[],[l]),onItemActivate:i,onItemDeactivate:b.useCallback(()=>i(""),[i]),children:e.jsx(ie,{...o,ref:r})})}),ut=b.forwardRef((t,r)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},...o}=t,[l,i]=E({prop:n,defaultProp:s??[],onChange:a,caller:w}),d=b.useCallback(v=>i((u=[])=>[...u,v]),[i]),p=b.useCallback(v=>i((u=[])=>u.filter(g=>g!==v)),[i]);return e.jsx(se,{scope:t.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:d,onItemDeactivate:p,children:e.jsx(ie,{...o,ref:r})})});$.displayName=w;var[pt,mt]=re(w),ie=b.forwardRef((t,r)=>{const{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:a=!0,orientation:o,dir:l,loop:i=!0,...d}=t,p=ae(n),v=ve(l),u={role:"group",dir:v,...d};return e.jsx(pt,{scope:n,rovingFocus:a,disabled:s,children:a?e.jsx(fe,{asChild:!0,...p,orientation:o,dir:v,loop:i,children:e.jsx(B.div,{...u,ref:r})}):e.jsx(B.div,{...u,ref:r})})}),I="ToggleGroupItem",oe=b.forwardRef((t,r)=>{const n=ne(I,t.__scopeToggleGroup),s=mt(I,t.__scopeToggleGroup),a=ae(t.__scopeToggleGroup),o=n.value.includes(t.value),l=s.disabled||t.disabled,i={...t,pressed:o,disabled:l},d=b.useRef(null);return s.rovingFocus?e.jsx(he,{asChild:!0,...a,focusable:!l,active:o,ref:d,children:e.jsx(J,{...i,ref:r})}):e.jsx(J,{...i,ref:r})});oe.displayName=I;var J=b.forwardRef((t,r)=>{const{__scopeToggleGroup:n,value:s,...a}=t,o=ne(I,n),l={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},i=o.type==="single"?l:void 0;return e.jsx(G,{...i,...a,ref:r,onPressedChange:d=>{d?o.onItemActivate(s):o.onItemDeactivate(s)}})}),le=$,ce=oe;const de=xe("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),gt=c.forwardRef(({className:t,variant:r,size:n,...s},a)=>e.jsx(te,{ref:a,className:x(de({variant:r,size:n,className:t})),...s}));gt.displayName=te.displayName;const ue=c.createContext({size:"default",variant:"default"}),pe=c.forwardRef(({className:t,variant:r,size:n,children:s,...a},o)=>e.jsx(le,{ref:o,className:x("flex items-center justify-center gap-1",t),...a,children:e.jsx(ue.Provider,{value:{variant:r,size:n},children:s})}));pe.displayName=le.displayName;const k=c.forwardRef(({className:t,children:r,variant:n,size:s,...a},o)=>{const l=c.useContext(ue);return e.jsx(ce,{ref:o,className:x(de({variant:l.variant||n,size:l.size||s}),t),...a,children:r})});k.displayName=ce.displayName;const ht={visitors:{label:"Visitors"},activeUsers:{label:"Active Users (24h)",color:"hsl(var(--chart-1))"},totalUsers:{label:"Total Users",color:"hsl(var(--chart-2))"}};function vt(t,r,n){const s=_(),a=ye(),[o,l]=c.useState("90d");c.useEffect(()=>{a&&l("7d")},[a]);const i=u=>{const g=[],f=new Date,h=u?.activeUsers24h?.value||0,y=u?.totalUsers?.value||0;for(let j=89;j>=0;j--){const m=new Date(f);m.setDate(m.getDate()-j);const N=.8+Math.random()*.4;g.push({date:m.toISOString().split("T")[0],activeUsers:Math.round(h*N),totalUsers:Math.round(y*(.95+Math.random()*.1))})}return g},d=c.useCallback(async()=>{s(M())},[s]);c.useEffect(()=>{d();const u=setInterval(d,300*1e3);return()=>clearInterval(u)},[d]);const p=c.useMemo(()=>!t||typeof t!="object"?[]:i(t),[t]),v=c.useMemo(()=>{if(!p.length)return[];const u=new Date;let g=o==="30d"?30:o==="7d"?7:90;const f=new Date;return f.setDate(u.getDate()-g),p.filter(h=>new Date(h.date)>=f)},[p,o]);return!r&&(!t||Object.keys(t).length===0)?e.jsx("div",{children:"No data available"}):r?e.jsxs(P,{className:"@container/card",children:[e.jsxs(T,{children:[e.jsx(D,{children:"Real-Time Visitors"}),e.jsx(A,{children:"Loading visitor data..."})]}),e.jsx(R,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:e.jsx("div",{className:"flex items-center justify-center h-[250px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})]}):n?e.jsxs(P,{className:"@container/card",children:[e.jsxs(T,{children:[e.jsx(D,{children:"Real-Time Visitors"}),e.jsx(A,{className:"text-red-500",children:n})]}),e.jsx(R,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-[250px] gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Failed to load visitor data"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Retry"})]})})]}):e.jsxs(P,{className:"@container/card",children:[e.jsxs(T,{children:[e.jsx(D,{children:"Real-Time Visitors"}),e.jsxs(A,{children:[e.jsx("span",{className:"hidden @[540px]/card:block",children:t&&e.jsxs(e.Fragment,{children:["Active:"," ",e.jsx("strong",{children:t?.activeUsers24h?.value.toLocaleString()})," ","| Total:"," ",e.jsx("strong",{children:t?.totalUsers?.value.toLocaleString()})]})}),e.jsx("span",{className:"@[540px]/card:hidden",children:t&&`${t?.activeUsers24h?.value.toLocaleString()} active`})]}),e.jsxs(be,{children:[e.jsxs(pe,{type:"single",value:o,onValueChange:l,variant:"outline",className:"hidden *:data-[slot=toggle-group-item]:!px-4 @[767px]/card:flex",children:[e.jsx(k,{value:"90d",children:"Last 3 months"}),e.jsx(k,{value:"30d",children:"Last 30 days"}),e.jsx(k,{value:"7d",children:"Last 7 days"})]}),e.jsxs(Ee,{value:o,onValueChange:l,children:[e.jsx(_e,{className:"flex w-40 **:data-[slot=select-value]:block **:data-[slot=select-value]:truncate @[767px]/card:hidden",size:"sm","aria-label":"Select a value",children:e.jsx(Me,{placeholder:"Last 3 months"})}),e.jsxs(Ge,{className:"rounded-xl",children:[e.jsx(L,{value:"90d",className:"rounded-lg",children:"Last 3 months"}),e.jsx(L,{value:"30d",className:"rounded-lg",children:"Last 30 days"}),e.jsx(L,{value:"7d",className:"rounded-lg",children:"Last 7 days"})]})]})]})]}),e.jsx(R,{className:"px-2 pt-4 sm:px-6 sm:pt-6",children:e.jsx(Q,{config:ht,className:"aspect-auto h-[250px] w-full",children:e.jsxs(Se,{data:v,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"fillActiveUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"var(--color-activeUsers)",stopOpacity:1}),e.jsx("stop",{offset:"95%",stopColor:"var(--color-activeUsers)",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"fillTotalUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"var(--color-totalUsers)",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"var(--color-totalUsers)",stopOpacity:.1})]})]}),e.jsx(De,{vertical:!1}),e.jsx(Ae,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(Je,{cursor:!1,content:e.jsx(Y,{labelFormatter:u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),indicator:"dot"})}),e.jsx(F,{dataKey:"totalUsers",type:"natural",fill:"url(#fillTotalUsers)",stroke:"var(--color-totalUsers)",stackId:"a"}),e.jsx(F,{dataKey:"activeUsers",type:"natural",fill:"url(#fillActiveUsers)",stroke:"var(--color-activeUsers)",stackId:"a"})]})})})]})}function ft({kpiData:t,loading:r,error:n}){const s=_(),a=t,o=c.useCallback(async()=>{s(M())},[s]);if(c.useEffect(()=>{o();const g=setInterval(o,300*1e3);return()=>clearInterval(g)},[o]),r)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!a)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-gray-500",children:"No KPI data found."})});if(n)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Error"})]}),e.jsx("p",{className:"text-red-600 mb-4",children:n}),e.jsx("button",{onClick:o,className:"w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition",children:"Retry"})]})});const l=[{name:"Active Users",value:a?.totalUsers?.value,color:"#10b981"},{name:"Banned Users",value:a?.TotalBanUsers?.value,color:"#ef4444"}],i=[{name:"Paid Users",value:a?.paidUsers?.value,color:"#f59e0b"},{name:"Free Users",value:a?.totalUsers?.value-a?.paidUsers?.value,color:"#6b7280"}],d=[{name:"Active (24h)",value:a?.activeUsers24h?.value,color:"#3b82f6"},{name:"Inactive",value:a?.totalUsers?.value-a?.activeUsers24h.value,color:"#9ca3af"}],p=[{name:"Open Tickets",value:a?.TotalTickets.value,color:"#8b5cf6"},{name:"Open Reports",value:a?.openReports.value,color:"#ec4899"},{name:"Pending Verifications",value:a?.pendingVerifications.value,color:"#14b8a6"},{name:"Claimed Prizes",value:a?.ClaimedPrize.value,color:"#f97316"}],v=({active:g,payload:f})=>g&&f&&f.length?e.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:f[0].name}),e.jsx("p",{className:"text-gray-600",children:f[0].value.toLocaleString()})]}):null,u=(g,f)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:f}),e.jsx(X,{width:"100%",height:300,children:e.jsxs(Re,{children:[e.jsx(Le,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:h,percent:y})=>`${h}: ${(y*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((h,y)=>e.jsx(Ue,{fill:h.color},`cell-${y}`))}),e.jsx(K,{content:e.jsx(v,{})})]})}),e.jsx("div",{className:"mt-4 space-y-2",children:g.map((h,y)=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:h.color}}),e.jsx("span",{className:"text-sm text-gray-700",children:h.name})]})},y))})]});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-jakarta",children:"KPI Overview"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Last updated: ",new Date(a.lastUpdatedAt).toLocaleString()]})]}),e.jsxs("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u(l,"User Status Distribution"),u(i,"User Type Distribution"),u(d,"User Activity (24h)"),u(p,"Support & Moderation")]}),a?.openReports.severity==="high"&&e.jsx("div",{className:"mt-6 bg-red-50 border-l-4 border-red-500 p-4 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:["High number of open reports (",a?.openReports.value,"). Immediate attention required."]})})]})})]})})}const xt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},yt={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}};function bt({stats:t,loading:r,error:n}){const s=je();if(r)return e.jsx("div",{className:"grid grid-cols-1 gap-4 px-4 sm:grid-cols-2 lg:grid-cols-4 lg:px-6",children:[...Array(8)].map((i,d)=>e.jsx(P,{className:"animate-pulse",children:e.jsxs(T,{children:[e.jsx("div",{className:"h-4 w-24 rounded bg-muted"}),e.jsx("div",{className:"mt-2 h-8 w-20 rounded bg-muted"})]})},d))});if(n||!t?.totalUsers)return e.jsx("div",{className:"mx-4 rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-600 lg:mx-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),n||"Failed to load dashboard data"]})});const a=[{title:"Total Users",value:t.totalUsers.value,icon:we,color:"blue",badge:"Live"},{title:"Active (24h)",value:t.activeUsers24h.value,icon:Ce,color:"emerald",badge:"Active"},{title:"Premium",value:t.paidUsers.value,icon:$e,color:"amber",badge:"Revenue"},{title:"Banned",value:t.TotalBanUsers.value,icon:Fe,color:"rose",badge:"Restricted"},{title:"Support",value:t.TotalTickets.value,icon:Ne,color:"indigo",badge:"Tickets",route:"/admin/management/support"},{title:"Claimed Prizes",value:t.ClaimedPrize.value,icon:Pe,color:"pink",badge:"Claimed",route:"/admin/management/giveaway"},{title:"Reports",value:t.openReports.value,icon:z,color:"orange",badge:t.openReports.actionable?"Urgent":"Clean",pulse:t.openReports.actionable,route:"/admin/management/profile-review"},{title:"Verifications",value:t.pendingVerifications.value,icon:Te,color:"cyan",badge:"Pending",pulse:t.pendingVerifications.actionable,route:"/admin/management/kyc-verifications"}],o={blue:"from-blue-800 to-transparent text-blue-600 bg-blue-100 border-blue-400",emerald:"from-emerald-800 to-transparent text-emerald-600 bg-emerald-100 border-emerald-100400",amber:"from-amber-800 to-transparent text-amber-600 bg-amber-100 border-amber-400",rose:"from-rose-800 to-transparent text-rose-600 bg-rose-100 border-rose-400",indigo:"from-indigo-800 to-transparent text-indigo-600 bg-indigo-100 border-indigo-400",pink:"from-pink-800 to-transparent text-pink-600 bg-pink-100 border-pink-400",orange:"from-orange-800 to-transparent text-orange-600 bg-orange-100 border-orange-400",cyan:"from-cyan-800 to-transparent text-cyan-600 bg-cyan-100 border-cyan-400"},l={blue:"from-blue-200/20 to-transparent text-blue-600 border-blue-400",emerald:"from-emerald-200/20 to-transparent text-emerald-600 border-emerald-400",amber:"from-amber-200/20 to-transparent text-amber-600 border-amber-400",rose:"from-rose-200/20 to-transparent text-rose-600 border-rose-400",indigo:"from-indigo-200/20 to-transparent text-indigo-600 border-indigo-400",pink:"from-pink-200/20 to-transparent text-pink-600 border-pink-400",orange:"from-orange-200/20 to-transparent text-orange-600 border-orange-100",cyan:"from-cyan-200/20 to-transparent text-cyan-600 border-cyan-400"};return e.jsx(O.div,{variants:xt,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 cursor-pointer",children:a.map((i,d)=>{const p=i.icon;return e.jsx(O.div,{variants:yt,children:e.jsx(P,{className:x("group relative overflow-hidden p-4 py-6 rounded-2xl border transition-all duration-300",i.pulse&&"ring-2 ring-rose-500 ring-offset-2 animate-pulse-slow",l[i.color],"hover:border-slate-400 shadow-sm hover:shadow-xl"),onClick:()=>s(i.route||"/admin/management/users-management",{state:i.badge}),children:e.jsxs("div",{className:"relative flex items-start justify-center gap-3",children:[e.jsx("div",{className:x("p-3 rounded-2xl bg-gradient-to-br border shadow-sm",o[i.color]),children:e.jsx(p,{size:22,stroke:2})}),e.jsxs("div",{className:"flex-1 w-full space-y-2 px-2",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest mb-0.5",children:i.title}),e.jsx("h4",{className:"text-2xl font-black text-slate-900 leading-none",children:i.value.toLocaleString()}),e.jsxs("div",{className:"flex items-center gap-6 font-medium mt-1 truncate text-slate-500",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-400",children:"Updated just now"}),e.jsx(Ve,{size:20,className:"text-slate-300 group-hover:text-slate-900 transition-colors"})]})]}),e.jsx("div",{className:"absolute -top-4 right-0",children:e.jsx(ke,{variant:i.pulse?"destructive":"outline",className:"text-[10px] font-bold uppercase tracking-wider border",children:i.badge})})]})})},d)})})}const jt=JSON.parse(`[{"id":1,"header":"Cover page","type":"Cover page","status":"In Process","target":"18","limit":"5","reviewer":"Eddie Lake"},{"id":2,"header":"Table of contents","type":"Table of contents","status":"Done","target":"29","limit":"24","reviewer":"Eddie Lake"},{"id":3,"header":"Executive summary","type":"Narrative","status":"Done","target":"10","limit":"13","reviewer":"Eddie Lake"},{"id":4,"header":"Technical approach","type":"Narrative","status":"Done","target":"27","limit":"23","reviewer":"Jamik Tashpulatov"},{"id":5,"header":"Design","type":"Narrative","status":"In Process","target":"2","limit":"16","reviewer":"Jamik Tashpulatov"},{"id":6,"header":"Capabilities","type":"Narrative","status":"In Process","target":"20","limit":"8","reviewer":"Jamik Tashpulatov"},{"id":7,"header":"Integration with existing systems","type":"Narrative","status":"In Process","target":"19","limit":"21","reviewer":"Jamik Tashpulatov"},{"id":8,"header":"Innovation and Advantages","type":"Narrative","status":"Done","target":"25","limit":"26","reviewer":"Assign reviewer"},{"id":9,"header":"Overview of EMR's Innovative Solutions","type":"Technical content","status":"Done","target":"7","limit":"23","reviewer":"Assign reviewer"},{"id":10,"header":"Advanced Algorithms and Machine Learning","type":"Narrative","status":"Done","target":"30","limit":"28","reviewer":"Assign reviewer"},{"id":11,"header":"Adaptive Communication Protocols","type":"Narrative","status":"Done","target":"9","limit":"31","reviewer":"Assign reviewer"},{"id":12,"header":"Advantages Over Current Technologies","type":"Narrative","status":"Done","target":"12","limit":"0","reviewer":"Assign reviewer"},{"id":13,"header":"Past Performance","type":"Narrative","status":"Done","target":"22","limit":"33","reviewer":"Assign reviewer"},{"id":14,"header":"Customer Feedback and Satisfaction Levels","type":"Narrative","status":"Done","target":"15","limit":"34","reviewer":"Assign reviewer"},{"id":15,"header":"Implementation Challenges and Solutions","type":"Narrative","status":"Done","target":"3","limit":"35","reviewer":"Assign reviewer"},{"id":16,"header":"Security Measures and Data Protection Policies","type":"Narrative","status":"In Process","target":"6","limit":"36","reviewer":"Assign reviewer"},{"id":17,"header":"Scalability and Future Proofing","type":"Narrative","status":"Done","target":"4","limit":"37","reviewer":"Assign reviewer"},{"id":18,"header":"Cost-Benefit Analysis","type":"Plain language","status":"Done","target":"14","limit":"38","reviewer":"Assign reviewer"},{"id":19,"header":"User Training and Onboarding Experience","type":"Narrative","status":"Done","target":"17","limit":"39","reviewer":"Assign reviewer"},{"id":20,"header":"Future Development Roadmap","type":"Narrative","status":"Done","target":"11","limit":"40","reviewer":"Assign reviewer"},{"id":21,"header":"System Architecture Overview","type":"Technical content","status":"In Process","target":"24","limit":"18","reviewer":"Maya Johnson"},{"id":22,"header":"Risk Management Plan","type":"Narrative","status":"Done","target":"15","limit":"22","reviewer":"Carlos Rodriguez"},{"id":23,"header":"Compliance Documentation","type":"Legal","status":"In Process","target":"31","limit":"27","reviewer":"Sarah Chen"},{"id":24,"header":"API Documentation","type":"Technical content","status":"Done","target":"8","limit":"12","reviewer":"Raj Patel"},{"id":25,"header":"User Interface Mockups","type":"Visual","status":"In Process","target":"19","limit":"25","reviewer":"Leila Ahmadi"},{"id":26,"header":"Database Schema","type":"Technical content","status":"Done","target":"22","limit":"20","reviewer":"Thomas Wilson"},{"id":27,"header":"Testing Methodology","type":"Technical content","status":"In Process","target":"17","limit":"14","reviewer":"Assign reviewer"},{"id":28,"header":"Deployment Strategy","type":"Narrative","status":"Done","target":"26","limit":"30","reviewer":"Eddie Lake"},{"id":29,"header":"Budget Breakdown","type":"Financial","status":"In Process","target":"13","limit":"16","reviewer":"Jamik Tashpulatov"},{"id":30,"header":"Market Analysis","type":"Research","status":"Done","target":"29","limit":"32","reviewer":"Sophia Martinez"},{"id":31,"header":"Competitor Comparison","type":"Research","status":"In Process","target":"21","limit":"19","reviewer":"Assign reviewer"},{"id":32,"header":"Maintenance Plan","type":"Technical content","status":"Done","target":"16","limit":"23","reviewer":"Alex Thompson"},{"id":33,"header":"User Personas","type":"Research","status":"In Process","target":"27","limit":"24","reviewer":"Nina Patel"},{"id":34,"header":"Accessibility Compliance","type":"Legal","status":"Done","target":"18","limit":"21","reviewer":"Assign reviewer"},{"id":35,"header":"Performance Metrics","type":"Technical content","status":"In Process","target":"23","limit":"26","reviewer":"David Kim"},{"id":36,"header":"Disaster Recovery Plan","type":"Technical content","status":"Done","target":"14","limit":"17","reviewer":"Jamik Tashpulatov"},{"id":37,"header":"Third-party Integrations","type":"Technical content","status":"In Process","target":"25","limit":"28","reviewer":"Eddie Lake"},{"id":38,"header":"User Feedback Summary","type":"Research","status":"Done","target":"20","limit":"15","reviewer":"Assign reviewer"},{"id":39,"header":"Localization Strategy","type":"Narrative","status":"In Process","target":"12","limit":"19","reviewer":"Maria Garcia"},{"id":40,"header":"Mobile Compatibility","type":"Technical content","status":"Done","target":"28","limit":"31","reviewer":"James Wilson"},{"id":41,"header":"Data Migration Plan","type":"Technical content","status":"In Process","target":"19","limit":"22","reviewer":"Assign reviewer"},{"id":42,"header":"Quality Assurance Protocols","type":"Technical content","status":"Done","target":"30","limit":"33","reviewer":"Priya Singh"},{"id":43,"header":"Stakeholder Analysis","type":"Research","status":"In Process","target":"11","limit":"14","reviewer":"Eddie Lake"},{"id":44,"header":"Environmental Impact Assessment","type":"Research","status":"Done","target":"24","limit":"27","reviewer":"Assign reviewer"},{"id":45,"header":"Intellectual Property Rights","type":"Legal","status":"In Process","target":"17","limit":"20","reviewer":"Sarah Johnson"},{"id":46,"header":"Customer Support Framework","type":"Narrative","status":"Done","target":"22","limit":"25","reviewer":"Jamik Tashpulatov"},{"id":47,"header":"Version Control Strategy","type":"Technical content","status":"In Process","target":"15","limit":"18","reviewer":"Assign reviewer"},{"id":48,"header":"Continuous Integration Pipeline","type":"Technical content","status":"Done","target":"26","limit":"29","reviewer":"Michael Chen"},{"id":49,"header":"Regulatory Compliance","type":"Legal","status":"In Process","target":"13","limit":"16","reviewer":"Assign reviewer"},{"id":50,"header":"User Authentication System","type":"Technical content","status":"Done","target":"28","limit":"31","reviewer":"Eddie Lake"},{"id":51,"header":"Data Analytics Framework","type":"Technical content","status":"In Process","target":"21","limit":"24","reviewer":"Jamik Tashpulatov"},{"id":52,"header":"Cloud Infrastructure","type":"Technical content","status":"Done","target":"16","limit":"19","reviewer":"Assign reviewer"},{"id":53,"header":"Network Security Measures","type":"Technical content","status":"In Process","target":"29","limit":"32","reviewer":"Lisa Wong"},{"id":54,"header":"Project Timeline","type":"Planning","status":"Done","target":"14","limit":"17","reviewer":"Eddie Lake"},{"id":55,"header":"Resource Allocation","type":"Planning","status":"In Process","target":"27","limit":"30","reviewer":"Assign reviewer"},{"id":56,"header":"Team Structure and Roles","type":"Planning","status":"Done","target":"20","limit":"23","reviewer":"Jamik Tashpulatov"},{"id":57,"header":"Communication Protocols","type":"Planning","status":"In Process","target":"15","limit":"18","reviewer":"Assign reviewer"},{"id":58,"header":"Success Metrics","type":"Planning","status":"Done","target":"30","limit":"33","reviewer":"Eddie Lake"},{"id":59,"header":"Internationalization Support","type":"Technical content","status":"In Process","target":"23","limit":"26","reviewer":"Jamik Tashpulatov"},{"id":60,"header":"Backup and Recovery Procedures","type":"Technical content","status":"Done","target":"18","limit":"21","reviewer":"Assign reviewer"},{"id":61,"header":"Monitoring and Alerting System","type":"Technical content","status":"In Process","target":"25","limit":"28","reviewer":"Daniel Park"},{"id":62,"header":"Code Review Guidelines","type":"Technical content","status":"Done","target":"12","limit":"15","reviewer":"Eddie Lake"},{"id":63,"header":"Documentation Standards","type":"Technical content","status":"In Process","target":"27","limit":"30","reviewer":"Jamik Tashpulatov"},{"id":64,"header":"Release Management Process","type":"Planning","status":"Done","target":"22","limit":"25","reviewer":"Assign reviewer"},{"id":65,"header":"Feature Prioritization Matrix","type":"Planning","status":"In Process","target":"19","limit":"22","reviewer":"Emma Davis"},{"id":66,"header":"Technical Debt Assessment","type":"Technical content","status":"Done","target":"24","limit":"27","reviewer":"Eddie Lake"},{"id":67,"header":"Capacity Planning","type":"Planning","status":"In Process","target":"21","limit":"24","reviewer":"Jamik Tashpulatov"},{"id":68,"header":"Service Level Agreements","type":"Legal","status":"Done","target":"26","limit":"29","reviewer":"Assign reviewer"}]`),It=()=>{const t=_(),{stats:r,loading:n,error:s}=Ie(a=>a.dashboard);return c.useEffect(()=>{r||t(M())},[t,r]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-1 flex-col font-jakarta",children:e.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 py-4 px-4 md:gap-6",children:[e.jsx(bt,{stats:r,loading:n,error:s}),e.jsx("div",{className:"px-2",children:e.jsx(vt,{kpiData:r,loading:n,error:s})}),e.jsx(ft,{kpiData:r,data:jt})]})})})})};export{It as default};
