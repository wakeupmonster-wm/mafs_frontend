import{D as j,j as e,aP as H,E as w,F as D,z as d,B as x,S as O,C as p,J as U,M as $,a as y,ar as M,H as K,K as Y,b6 as G,i as Q,A as J,r as f,aM as R,bj as X,N as h,aR as W,aQ as Z}from"./index-Cah9GgNi.js";import{P as ee}from"./headSubhead-C7X6Yce6.js";import{S as se}from"./shield-u_oQ7CN8.js";import{B as z}from"./ban-Ci-rYXMT.js";import{C as k}from"./clock-BveIEetd.js";import{T as ae}from"./triangle-alert-1qeuYxI_.js";import{U as E}from"./user-D1L96pnc.js";import{M as te}from"./map-pin-DpP5UDxf.js";import{S}from"./smartphone-BFpoTc86.js";import{F as re}from"./file-text-C62tHutv.js";import{I as T}from"./info-CpdJOb3o.js";import{I as le}from"./image-D0QaGE14.js";import{A as q}from"./index-Eb3V4Lej.js";import{M as ie}from"./maximize-2-DH_BjqFn.js";import{F as ne}from"./flag-C5b50tBx.js";import{R as _}from"./reply-D8OrzNJ1.js";import{T as P}from"./textarea-BdgJi3SO.js";import{S as I,a as A,b as F,c as B,d as b}from"./select-DxUcbfzd.js";import{L as oe}from"./loader-circle-D_OERo1u.js";import{C as L}from"./circle-alert-CnaEjTQV.js";import{C as ce}from"./circle-x-D3br8V_4.js";import{C as de}from"./chevron-left-IoiNEKJ3.js";const xe=[["path",{d:"M14.564 14.558a3 3 0 1 1-4.122-4.121",key:"1rnrzw"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M20 20H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 .819-.175",key:"1x3arw"}],["path",{d:"M9.695 4.024A2 2 0 0 1 10.004 4h3.993a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v7.344",key:"1i84u0"}]],me=j("camera-off",xe);const he=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],pe=j("fingerprint-pattern",he);const ue=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],be=j("link",ue);const ge=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]],je=j("message-square-text",ge);const fe=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Ne=j("quote",fe),ve=({p:s})=>e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsx(H,{to:"/admin/management/profile-reports",children:e.jsxs(w,{variant:"outline",className:"gap-2 border-slate-300",children:[e.jsx(D,{className:"w-4 h-4"}),"Back to Reports"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ee,{heading:`Profile Review: ${s.profile.nickname}`,icon:e.jsx(se,{className:"w-6 h-6 text-white shrink-0"}),color:"bg-gradient-to-br from-indigo-600 via-blue-600 to-brand-aqua",subheading:"Review the reported content, user history, and evidence before taking disciplinary action."})}),e.jsxs(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex flex-wrap items-center gap-3 bg-white/40 backdrop-blur-md p-3 rounded-2xl border border-white shadow-xl shadow-slate-200/50",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest w-full px-2 mb-1",children:"Current Standing"}),s.accountStatus==="banned"&&e.jsxs(x,{className:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 shadow-none py-1.5 px-3 rounded-lg flex items-center",children:[e.jsx(z,{className:"w-3.5 h-3.5 mr-2"}),"BANNED"]}),s.accountStatus==="suspended"&&e.jsxs(x,{className:"bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100 shadow-none py-1.5 px-3 rounded-lg",children:[e.jsx(k,{className:"w-3.5 h-3.5 mr-2"}),"SUSPENDED"]}),s.status==="resolved"?e.jsxs(x,{className:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 shadow-none py-1.5 px-3 rounded-lg",children:[e.jsx(O,{className:"w-3.5 h-3.5 mr-2"}),"CASE CLOSED"]}):e.jsx(x,{variant:"outline",className:"text-slate-400 border-slate-200 py-1.5 px-3 rounded-lg",children:"OPEN CASE"}),s.reportCount>=5&&e.jsxs(x,{className:"bg-red-600 text-white border-none shadow-lg shadow-red-200 py-1.5 px-3 rounded-lg animate-pulse",children:[e.jsx(ae,{className:"w-3.5 h-3.5 mr-2"}),"CRITICAL RISK"]})]})]})]}),we=({p:s})=>{const a=t=>{if(!t)return"-";const l=new Date,n=new Date(t);let o=l.getFullYear()-n.getFullYear();const r=l.getMonth()-n.getMonth();return(r<0||r===0&&l.getDate()<n.getDate())&&o--,o};return e.jsxs(p,{className:"p-6 shadow-sm border-slate-200 bg-white",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(E,{className:"w-5 h-5 text-blue-600"})}),"User Information"]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(U,{className:"w-3.5 h-3.5"})," Profile Demographics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(m,{label:"Gender",value:s.profile?.gender||"-"}),e.jsx(m,{label:"Age",value:`${a(s.profile?.dob)} Years`}),e.jsx(m,{label:"Location",value:s.profile?.location?.city||"Unknown",icon:e.jsx(te,{className:"w-3 h-3 text-slate-400"})}),e.jsx(m,{label:"Nickname",value:s.profile?.nickname||"-"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(S,{className:"w-3.5 h-3.5"})," Account Identity"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(m,{label:"User ID",value:s.userId,isCode:!0,icon:e.jsx(pe,{className:"w-3 h-3 text-slate-400"})}),e.jsx(m,{label:"Email Address",value:s.profile?.email||"No Email",icon:e.jsx($,{className:"w-3 h-3 text-slate-400"})}),e.jsx(m,{label:"Phone Number",value:s?.phone||"No Phone",icon:e.jsx(S,{className:"w-3 h-3 text-slate-400"})})]})]})]})]})},m=({label:s,value:a,isCode:t=!1,icon:l})=>e.jsxs("div",{className:"group w-full bg-slate-50/50 p-4 rounded-2xl border border-slate-100 transition-all hover:bg-white hover:shadow-md hover:border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[l,e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tight",children:s})]}),e.jsx("p",{className:y("text-sm font-bold text-slate-700 truncate",t&&"font-mono text-[11px] text-blue-600 bg-blue-50/50 p-1 rounded px-2 border border-blue-100 w-fit max-w-full"),children:a})]}),ye=({bio:s})=>{const a=s&&s.trim().length>0;return e.jsxs(p,{className:"group p-6 shadow-sm border-slate-200 bg-white transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors",children:e.jsx(re,{className:"w-5 h-5 text-blue-600"})}),"Biography"]}),a&&e.jsxs("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:[s.length," Characters"]})]}),e.jsx("div",{className:y("relative p-5 rounded-2xl border transition-all duration-300",a?"bg-slate-50/30 border-slate-100 shadow-inner":"bg-amber-50/30 border-amber-100 border-dashed"),children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"absolute -top-3 -left-2 w-8 h-8 text-blue-100 -rotate-12 pointer-events-none"}),e.jsx("p",{className:"relative z-10 text-slate-700 leading-relaxed text-sm md:text-base font-medium whitespace-pre-wrap",children:s})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-4 text-center",children:[e.jsx("div",{className:"p-2 bg-amber-100/50 rounded-full mb-2",children:e.jsx(T,{className:"w-4 h-4 text-amber-600"})}),e.jsx("p",{className:"text-amber-700/60 text-sm font-medium italic",children:"This user hasn't shared a story yet."})]})})]})},ke=({photos:s,onImageClick:a})=>{const t=s&&s.length>0;return e.jsxs(p,{className:"p-6 shadow-sm border-slate-200 bg-white overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(le,{className:"w-5 h-5 text-blue-600"})}),"Profile Photos",e.jsxs("span",{className:"ml-1 text-slate-400 font-medium text-sm",children:["(",s?.length||0,")"]})]}),t&&e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-2 py-1 rounded-md",children:"Click to Enlarge"})]}),t?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:e.jsx(q,{children:s.map((l,n)=>e.jsxs(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:n*.05},whileHover:{y:-4},className:"relative aspect-square rounded-2xl overflow-hidden bg-slate-100 cursor-pointer shadow-sm group border border-slate-200/50",onClick:()=>a(l.url||l,n),children:[e.jsx("img",{src:l.url||l,alt:`Evidence ${n+1}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),n===0&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("span",{className:"bg-blue-600 text-white text-[9px] font-black px-2 py-1 rounded-md shadow-lg shadow-blue-200 uppercase tracking-tighter",children:"Primary"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-md p-2 rounded-full border border-white/30 shadow-xl",children:e.jsx(ie,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-white text-[10px] font-bold uppercase tracking-widest drop-shadow-md",children:"Inspect"})]})})]},l._id||n))})}):e.jsxs("div",{className:"bg-slate-50/50 rounded-3xl p-12 text-center border-2 border-dashed border-slate-100 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"p-4 bg-white rounded-full shadow-sm mb-4",children:e.jsx(me,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No visual evidence uploaded."}),e.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"This user has not added any profile photos."})]})]})},Ce=({reports:s,count:a})=>e.jsxs(p,{className:"p-6 border-slate-200 shadow-sm bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:e.jsx(ne,{className:"w-5 h-5 text-red-600"})}),"Active Complaints"]}),e.jsxs(x,{variant:"secondary",className:"bg-slate-100 text-slate-600 font-bold px-3",children:[a," ",a===1?"Report":"Reports"]})]}),e.jsx("div",{className:"space-y-6",children:!s||s.length===0?e.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-slate-100 rounded-2xl",children:[e.jsx(je,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400 font-medium",children:"Clear record. No reports found."})]}):s.map((t,l)=>e.jsxs("div",{className:"group relative flex flex-col gap-3 p-5 rounded-2xl border border-slate-100 bg-slate-50/30 transition-all hover:bg-white hover:shadow-md hover:border-blue-100",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(x,{className:y("uppercase text-[10px] font-black tracking-wider px-2 py-0.5 shadow-none border",t.severity==="high"?"bg-red-50 text-red-700 border-red-100":"bg-amber-50 text-amber-700 border-amber-100"),children:t.reason}),t.adminReply&&e.jsx(x,{className:"bg-blue-600 text-white border-none text-[10px] px-2 py-0.5",children:"ACTION TAKEN"})]}),e.jsxs("time",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1 uppercase tracking-tighter",children:[e.jsx(k,{className:"w-3 h-3"}),new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-slate-200 rounded-full"}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"})," ",t.reportedBy?.name||"User ID: "+t.reportedBy?.slice(-6)]}),e.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed italic",children:['"',t.details||"No additional details provided.",'"']})]})]}),t.adminReply&&e.jsxs("div",{className:"mt-2 bg-blue-50/50 border border-blue-100 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1 bg-blue-600 rounded-md",children:e.jsx(_,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs font-black text-blue-900 uppercase tracking-tight",children:"Official Resolution"})]}),e.jsx("p",{className:"text-sm text-blue-800 font-medium pl-7",children:t.adminReply})]})]},t._id||l))})]}),Me=({p:s,formData:a,onUpdate:t,onSubmit:l,isSubmitting:n})=>{const o=s?.status==="resolved",r=()=>"w-full h-12 font-bold text-base shadow-lg transition-all "+({resolve:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 shadow-green-100",ban:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-red-100",suspend:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 shadow-amber-100",reply:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-blue-100"}[a.action]||"bg-slate-900");return e.jsxs(p,{className:"p-6 sticky top-24 border-none shadow-2xl shadow-slate-200/50 rounded-3xl overflow-hidden bg-white",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 tracking-tight",children:o?"Moderation Record":"Decision Center"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:o?"Case has been officially closed":"Select policy to execute on this profile"})]}),o?e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center p-8 bg-emerald-50/50 rounded-3xl border border-emerald-100",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-100 rounded-full mb-4",children:e.jsx(M,{className:"w-8 h-8 text-emerald-600"})}),e.jsx("h3",{className:"text-lg font-bold text-emerald-900",children:"Resolved"}),e.jsx("p",{className:"text-sm text-emerald-700/70 mt-1",children:"This report is no longer active."})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1 text-center",children:"Status Update"}),e.jsx("p",{className:"text-xs text-slate-600 text-center italic leading-relaxed",children:"Changes have been synced with the user's account and the global safety database."})]})})]}):e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Select Action Type"}),e.jsxs(I,{value:a.action,onValueChange:i=>t("action",i),children:[e.jsx(A,{className:"h-12 rounded-xl border-slate-200 focus:ring-brand-aqua shadow-sm bg-slate-50/50",children:e.jsx(F,{placeholder:"How will you handle this?"})}),e.jsxs(B,{children:[e.jsx(b,{value:"resolve",children:e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx(M,{className:"w-4 h-4 text-emerald-600"})," ",e.jsx("span",{children:"Approve Profile"})]})}),e.jsx(b,{value:"ban",children:e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx(z,{className:"w-4 h-4 text-red-600"})," ",e.jsx("span",{children:"Ban User Account"})]})}),e.jsx(b,{value:"suspend",children:e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx(k,{className:"w-4 h-4 text-amber-600"})," ",e.jsx("span",{children:"Suspend Account"})]})}),e.jsx(b,{value:"reply",children:e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx(_,{className:"w-4 h-4 text-blue-600"})," ",e.jsx("span",{children:"Message Reporter"})]})})]})]})]}),["resolve","ban","suspend"].includes(a.action)&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:[a.action==="resolve"?"Resolution Notes":"Violation Reason",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(P,{placeholder:a.action==="resolve"?"Notes for audit trail...":"Describe the policy violation...",value:a.reason,onChange:i=>t("reason",i.target.value),className:"min-h-[120px] rounded-2xl bg-slate-50/50 border-slate-200"})]}),a.action==="suspend"&&e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Duration (Hours) ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(K,{type:"number",min:1,placeholder:"e.g. 24, 48, 72",value:a.suspendDuration,onChange:i=>t("suspendDuration",i.target.value),className:"h-12 rounded-xl bg-slate-50/50 border-slate-200"})]}),a.action==="reply"&&e.jsxs("div",{className:"space-y-5 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Target Report ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs(I,{value:a.selectedReportId,onValueChange:i=>t("selectedReportId",i),children:[e.jsx(A,{className:"h-12 rounded-xl bg-slate-50/50",children:e.jsx(F,{placeholder:"Choose report to address"})}),e.jsx(B,{className:"max-h-64",children:s.reports?.map(i=>e.jsx(b,{value:i._id,className:"py-3",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-xs font-bold capitalize text-red-600",children:i.reason}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:["By: ",i.reportedBy?.name||"User"]})]})},i._id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Message Body ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(P,{placeholder:"Professional reply to reporter...",value:a.replyMessage,onChange:i=>t("replyMessage",i.target.value),className:"min-h-[150px] rounded-2xl bg-slate-50/50"}),e.jsx("div",{className:"bg-blue-50/80 p-3 rounded-xl border border-blue-100 mt-2",children:e.jsxs("p",{className:"text-[10px] text-blue-700 flex gap-2 leading-relaxed font-medium",children:[e.jsx(T,{className:"w-3.5 h-3.5 shrink-0"}),"Sent via email. Professional tone required."]})})]})]}),e.jsx(w,{type:"submit",disabled:n||!a.action,className:r(),children:n?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):a.action?e.jsxs("span",{className:"capitalize",children:["Confirm ",a.action," Action"]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Awaiting Decision"]})})]})]})},Re=({modal:s,photos:a,onClose:t,onNavigate:l})=>{const n=a[s.index];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4",onClick:t,children:[e.jsx("button",{className:"absolute top-6 right-6 text-white hover:text-red-400 transition-colors",onClick:t,children:e.jsx(ce,{className:"w-10 h-10"})}),e.jsxs("div",{className:"relative max-w-5xl w-full flex items-center justify-center",onClick:o=>o.stopPropagation(),children:[s.index>0&&e.jsx("button",{className:"absolute -left-16 p-3 bg-white/10 rounded-full text-white hover:bg-white/20",onClick:()=>l(a[s.index-1].url,s.index-1),children:e.jsx(de,{size:32})}),e.jsx("img",{src:n.url||n,className:"max-h-[85vh] rounded-xl shadow-2xl object-contain",alt:"Review"}),s.index<a.length-1&&e.jsx("button",{className:"absolute -right-16 p-3 bg-white/10 rounded-full text-white hover:bg-white/20",onClick:()=>l(a[s.index+1].url,s.index+1),children:e.jsx(Y,{size:32})})]})]})},Se=()=>e.jsx("div",{className:"m-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100 flex items-center justify-center p-4",children:e.jsx(p,{className:"p-8 max-w-2xl w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-100 rounded-full mb-4",children:e.jsx(L,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The requested profile could not be found."}),e.jsx(be,{to:"/admin/management/profile-review",children:e.jsxs(w,{className:"gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Back to Reports"]})})]})})}),Pe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},g={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};function We(){const{userId:s}=G();console.log("userId: ",s);const a=Q(),{selected:t,loading:l}=J(c=>c.profileReview||{}),[n,o]=f.useState(!1),[r,i]=f.useState({action:"",reason:"",suspendDuration:"",replyMessage:"",selectedReportId:""}),[N,C]=f.useState({isOpen:!1,url:null,index:0});if(f.useEffect(()=>{s&&a(R(s))},[s,a]),l)return e.jsx(X,{});if(!t)return e.jsx(Se,{});const V=async c=>{if(c.preventDefault(),!r.action){h.warning("Please select an action");return}if((r.action==="reject"||r.action==="ban")&&!r.reason.trim()){h.warning("Reason is required for this action");return}if(r.action==="suspend"&&(!r.suspendDuration||!r.reason.trim())){h.warning("Duration and reason are required for suspension");return}if(r.action==="reply"&&(!r.selectedReportId||!r.replyMessage.trim())){h.warning("Please select a report and enter a reply message");return}o(!0);const u={userId:s,action:r.action,reason:r.reason.trim()||void 0,replyMessage:r.action==="reply"?r.replyMessage.trim():void 0,reportId:r.action==="reply"?r.selectedReportId:void 0,suspendDuration:r.action==="suspend"?Number(r.suspendDuration):void 0};try{await a(W(u)).unwrap(),h.success("Moderation action executed successfully."),await Promise.all([a(R(s)),a(Z({page:1,limit:20}))]),i({action:"",reason:"",suspendDuration:"",replyMessage:"",selectedReportId:""})}catch(v){h.error(v?.message||"Failed to execute action.")}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] pb-12",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-blue-100/50 to-transparent -z-10"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ve,{p:t}),e.jsxs(d.div,{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",variants:Pe,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsx(d.div,{variants:g,children:e.jsx(we,{p:t})}),e.jsx(d.div,{variants:g,children:e.jsx(ye,{bio:t.profile?.bio})}),e.jsx(d.div,{variants:g,children:e.jsx(ke,{photos:t.profile?.photos,onImageClick:(c,u)=>C({isOpen:!0,url:c,index:u})})}),e.jsx(d.div,{variants:g,children:e.jsx(Ce,{reports:t.reports,count:t.reportCount})})]}),e.jsx(d.div,{className:"lg:col-span-4",variants:g,children:e.jsx("div",{className:"sticky top-24",children:e.jsx(Me,{p:t,formData:r,onUpdate:(c,u)=>i(v=>({...v,[c]:u})),onSubmit:V,isSubmitting:n})})})]})]}),e.jsx(q,{children:N.isOpen&&e.jsx(Re,{modal:N,photos:t.profile?.photos,onClose:()=>C(c=>({...c,isOpen:!1}))})})]})}export{We as default};
