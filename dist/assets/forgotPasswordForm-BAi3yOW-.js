import{a8 as P,s as v,i as S,A as E,r as n,j as s,H as x,E as C,b3 as k,N as u}from"./index-Cah9GgNi.js";import{a as q}from"./index.esm-CrVoclJi.js";import{a as F,r as I}from"./auth.schemas-D2OQRjoj.js";import{L as w,E as h}from"./lock-O3GpQ5RB.js";import{E as f}from"./eye-Ud1Tzidn.js";function A(){const i=P(),t=v(),g=S(),{loading:d}=E(c=>c.auth),[r,y]=n.useState(!1),[o,N]=n.useState(!1),{register:m,handleSubmit:b,formState:{errors:e}}=q({resolver:F(I)}),l=i.state?.email,p=i.state?.otp;n.useEffect(()=>{!l&&!p&&t("/auth/forgot-password",{replace:!0})},[l,t]);const j=async c=>{try{const a=await g(k({email:l,otp:p,newPassword:c.password})).unwrap();t(a.screen||"/auth/login",{replace:!0}),u.success(a.message||"Password is forgot successful!",{description:"Please enter email and password."})}catch(a){u.error(a||"Failed to send OTP",{description:"Please enter correct otp."})}};return s.jsxs("form",{onSubmit:b(j),className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-grey-900",children:"Set New Password"}),s.jsx("p",{className:"text-grey-500 text-sm mt-2",children:"Choose a strong password for your account."})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"relative",children:[s.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-grey-400"}),s.jsx(x,{...m("password"),type:r?"text":"password",placeholder:"New Password",className:`pl-10 py-6 focus:ring-brand-aqua/20 ${e.password?"border-alerts-error":"border-grey-200"}`}),s.jsx("button",{type:"button",onClick:()=>y(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:"-1",children:r?s.jsx(h,{className:"h-5 w-5"}):s.jsx(f,{className:"h-5 w-5"})})]}),e.password&&s.jsx("p",{className:"text-alerts-error text-xs ml-1",children:e.password.message})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"relative",children:[s.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-grey-400"}),s.jsx(x,{...m("confirmPassword"),type:o?"text":"password",placeholder:"Confirm Password",className:`pl-10 py-6 pr-10 focus:ring-brand-aqua/20 ${e.confirmPassword?"border-alerts-error":"border-grey-200"}`}),s.jsx("button",{type:"button",onClick:()=>N(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",tabIndex:"-1",children:o?s.jsx(h,{className:"h-5 w-5"}):s.jsx(f,{className:"h-5 w-5"})})]}),e.confirmPassword&&s.jsx("p",{className:"text-alerts-error text-xs ml-1",children:e.confirmPassword.message})]}),s.jsx(C,{type:"submit",disabled:d,className:"w-full py-6 bg-brand-aqua hover:bg-brand-aqua/90 text-white transition-all",children:d?"Updating...":"Update Password"})]})]})}export{A as default};
