import{D as Z,i as re,A as ie,r as c,as as le,N as r,at as k,j as e,C as F,m as R,n as W,p as G,H as g,E as $,X as U,B as ne,J as V,au as oe,av as me,aw as ce}from"./index-Cah9GgNi.js";import{A as H}from"./ActionDropdown-C1lHW89q.js";import{S as q,a as B,b as Q,c as J,d as f}from"./select-DxUcbfzd.js";import{T as X}from"./trophy-CRuQjySU.js";import{S as K}from"./square-pen-oprSd4Jm.js";import{P as O}from"./plus-DCZtzpkq.js";import{G as y}from"./gift-CJDpdJoS.js";import{T as de}from"./tag-DgavYqPe.js";import{C as P}from"./crown-4cfT-ZjR.js";import{C as z}from"./circle-dollar-sign-U1pwusAR.js";import{S}from"./sparkles-CJxx7LU5.js";import{L as Y}from"./loader-circle-D_OERo1u.js";import{S as xe}from"./search-B7fke5-e.js";import{I as he}from"./inbox-DEJGmHq1.js";const ue=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],pe=Z("coins",ue);const ge=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],fe=Z("list-plus",ge);function Ae(){const l=re(),{prizes:d,loading:v,error:x,successMessage:N}=ie(a=>a.giveaway),[s,o]=c.useState({title:"",type:"",value:"",spinWheelLabel:"",supportiveItems:""}),[h,D]=c.useState(""),[u,ee]=c.useState("ALL"),[i,w]=c.useState(null);c.useEffect(()=>{l(le())},[l]),c.useEffect(()=>{N&&(r.success(N),l(k())),x&&(r.error(typeof x=="string"?x:x.message||"An error occurred"),l(k()))},[N,x,l]);const E=a=>!a||typeof a!="string"?[]:a.split(",").map(t=>t.trim()).filter(t=>t.length>0),ae=()=>{const a=s.title.trim(),t=s.type.trim(),n=s.value.trim(),m=s.spinWheelLabel.trim(),te=s.supportiveItems.trim();if(!a)return r.error("Prize title is required"),!1;if(a.length<3)return r.error("Prize title must be at least 3 characters long"),!1;if(a.length>100)return r.error("Prize title must not exceed 100 characters"),!1;if(!t)return r.error("Please select a prize type"),!1;if(!n)return r.error("Prize value is required"),!1;const C=parseFloat(n);if(isNaN(C))return r.error("Prize value must be a valid number"),!1;if(C<=0)return r.error("Prize value must be greater than 0"),!1;if(C>1e6)return r.error("Prize value must not exceed 1,000,000"),!1;if(!m)return r.error("Spin wheel label is required"),!1;if(m.length<2)return r.error("Spin wheel label must be at least 2 characters long"),!1;if(m.length>50)return r.error("Spin wheel label must not exceed 50 characters"),!1;const L=E(te);if(L.length<2)return r.error("Please provide at least 2 supportive items separated by commas"),!1;if(L.some(p=>p.length<2))return r.error("Each supportive item must be at least 2 characters long"),!1;if(L.some(p=>p.length>50))return r.error("Each supportive item must not exceed 50 characters"),!1;if(i){if(d.find(j=>j._id!==i&&j.title.toLowerCase()===a.toLowerCase()))return r.error("A prize with this title already exists"),!1}else if(d.find(j=>j.title.toLowerCase()===a.toLowerCase()))return r.error("A prize with this title already exists"),!1;return!0},se=()=>{if(!ae())return;const a=E(s.supportiveItems.trim()),t={title:s.title.trim(),type:s.type.trim(),value:parseFloat(s.value.trim()),spinWheelLabel:s.spinWheelLabel.trim(),supportiveItems:a};i?(l(oe({id:i,data:t})),w(null)):l(me(t)),I()},I=()=>{o({title:"",type:"",value:"",spinWheelLabel:"",supportiveItems:""}),w(null)},A=a=>{const t=Array.isArray(a.supportiveItems)?a.supportiveItems.join(", "):"";o({title:a.title||"",type:a.type||"",value:a.value?a.value.toString():"",spinWheelLabel:a.spinWheelLabel||"",supportiveItems:t}),w(a._id),window.scrollTo({top:0,behavior:"smooth"})},T=(a,t)=>{window.confirm(`Are you sure you want to delete "${t}"? This action cannot be undone.`)&&(l(ce(a)),i===a&&I())},_=a=>a==="FREE_PREMIUM"?e.jsx(P,{className:"h-3.5 w-3.5"}):a==="GIFT_CARD"?e.jsx(z,{className:"h-3.5 w-3.5"}):e.jsx(y,{className:"h-3.5 w-3.5"}),M=a=>a==="FREE_PREMIUM"?"bg-amber-50 text-amber-700 border-amber-200":a==="GIFT_CARD"?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-gray-50 text-gray-700 border-gray-200",b=d.filter(a=>{const t=a.title.toLowerCase().includes(h.toLowerCase()),n=u==="ALL"||a.type===u;return t&&n});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 p-4 md:p-6 lg:p-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 shadow-lg shadow-gray-900/20 animate-in zoom-in-50 duration-500",children:e.jsx(X,{className:"h-6 w-6 text-white animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 tracking-tight",children:"Prizes"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Manage giveaway prizes"})]})]}),e.jsxs(F,{className:"border-0 shadow-lg shadow-gray-200/50 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-700 hover:shadow-xl transition-shadow",children:[e.jsx(R,{className:" pb-4",children:e.jsx(W,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:i?e.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in zoom-in-50 duration-300",children:[e.jsx(K,{className:"h-4 w-4 text-blue-600 animate-pulse"}),e.jsx("span",{children:"Edit Prize"})]}):e.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in zoom-in-50 duration-300",children:[e.jsx(O,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{children:"Create New Prize"})]})})}),e.jsxs(G,{className:"p-5 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1.5 animate-in fade-in slide-in-from-left-2 duration-500",style:{animationDelay:"100ms"},children:[e.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600",children:[e.jsx(y,{className:"h-3.5 w-3.5"}),"Prize Title *"]}),e.jsx(g,{placeholder:"e.g. Premium Membership",value:s.title,onChange:a=>o({...s,title:a.target.value}),className:"h-10 border-gray-200 bg-white focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300"})]}),e.jsxs("div",{className:"space-y-1.5 animate-in fade-in slide-in-from-left-2 duration-500",style:{animationDelay:"150ms"},children:[e.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600",children:[e.jsx(de,{className:"h-3.5 w-3.5"}),"Prize Type *"]}),e.jsxs(q,{value:s.type,onValueChange:a=>o({...s,type:a}),children:[e.jsx(B,{className:"h-10 border-gray-200 bg-white focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300",children:e.jsx(Q,{placeholder:"Select type"})}),e.jsxs(J,{children:[e.jsx(f,{value:"FREE_PREMIUM",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-3.5 w-3.5 text-amber-500"}),"FREE_PREMIUM"]})}),e.jsx(f,{value:"GIFT_CARD",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-3.5 w-3.5 text-emerald-500"}),"GIFT_CARD"]})})]})]})]}),e.jsxs("div",{className:"space-y-1.5 animate-in fade-in slide-in-from-left-2 duration-500",style:{animationDelay:"200ms"},children:[e.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600",children:[e.jsx(pe,{className:"h-3.5 w-3.5"}),"Value *"]}),e.jsx(g,{placeholder:"e.g. 150",value:s.value,onChange:a=>o({...s,value:a.target.value}),className:"h-10 border-gray-200 bg-white focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300",type:"number",min:"0",step:"0.01"})]}),e.jsxs("div",{className:"space-y-1.5 animate-in fade-in slide-in-from-left-2 duration-500",style:{animationDelay:"250ms"},children:[e.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600",children:[e.jsx(S,{className:"h-3.5 w-3.5"}),"Spin Wheel Label *"]}),e.jsx(g,{placeholder:"Display on wheel",value:s.spinWheelLabel,onChange:a=>o({...s,spinWheelLabel:a.target.value}),className:"h-10 border-gray-200 bg-white focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300"})]}),e.jsxs("div",{className:"space-y-1.5 sm:col-span-2 animate-in fade-in slide-in-from-left-2 duration-500",style:{animationDelay:"300ms"},children:[e.jsxs("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600",children:[e.jsx(fe,{className:"h-3.5 w-3.5"}),"Supportive Items * (Min 2, comma-separated)"]}),e.jsx(g,{placeholder:"e.g. Item1, Item2, Item3",value:s.supportiveItems,onChange:a=>o({...s,supportiveItems:a.target.value}),className:"h-10 border-gray-200 bg-white focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2 animate-in fade-in slide-in-from-bottom-2 duration-500",style:{animationDelay:"350ms"},children:[e.jsxs($,{onClick:se,disabled:v,className:"h-10 gap-2 bg-gradient-to-r from-gray-900 to-gray-800 font-medium shadow-md hover:from-gray-800 hover:to-gray-700 transition-all duration-200 hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[v?e.jsx(Y,{className:"h-4 w-4 animate-spin"}):i?e.jsx(K,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"}),i?"Update Prize":"Create Prize"]}),i&&e.jsxs($,{onClick:I,variant:"outline",className:"h-10 gap-2 border-gray-300 hover:bg-gray-50 transition-all hover:scale-105 animate-in fade-in zoom-in-50 duration-300",children:[e.jsx(U,{className:"h-4 w-4"}),"Cancel"]})]})]})]}),e.jsxs(F,{className:"border-0 shadow-lg shadow-gray-200/50 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-700 hover:shadow-xl transition-shadow",style:{animationDelay:"200ms"},children:[e.jsxs(R,{className:"border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(W,{className:"flex items-center gap-2 text-base font-semibold text-gray-800",children:[e.jsx(X,{className:"h-4 w-4 text-amber-600 animate-pulse"}),"All Prizes"]}),e.jsxs(ne,{variant:"secondary",className:"w-fit bg-amber-100 text-amber-700 border border-amber-200 animate-in fade-in zoom-in-50 duration-500",children:[b.length," of ",d.length," Total"]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"relative sm:col-span-2 animate-in fade-in slide-in-from-left-2 duration-500",style:{animationDelay:"100ms"},children:[e.jsx(xe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400 transition-colors"}),e.jsx(g,{placeholder:"Search prizes by title...",value:h,onChange:a=>D(a.target.value),className:"h-10 border-gray-200 bg-white pl-9 pr-9 focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300"}),h&&e.jsx("button",{onClick:()=>D(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-all duration-200 hover:scale-110 animate-in fade-in zoom-in-50 duration-300",children:e.jsx(U,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"animate-in fade-in slide-in-from-right-2 duration-500",style:{animationDelay:"150ms"},children:e.jsxs(q,{value:u,onValueChange:ee,children:[e.jsx(B,{className:"h-10 border-gray-200 bg-white focus:border-amber-300 focus:ring-amber-200 transition-all duration-200 hover:border-gray-300",children:e.jsx(Q,{placeholder:"Filter by type"})}),e.jsxs(J,{children:[e.jsx(f,{value:"ALL",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-3.5 w-3.5"}),"All Types"]})}),e.jsx(f,{value:"FREE_PREMIUM",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-3.5 w-3.5 text-amber-500"}),"FREE_PREMIUM"]})}),e.jsx(f,{value:"GIFT_CARD",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-3.5 w-3.5 text-emerald-500"}),"GIFT_CARD"]})})]})]})})]})]}),e.jsx(G,{className:"p-0",children:v&&d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-500 animate-in fade-in zoom-in-50 duration-700",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"h-10 w-10 animate-spin text-amber-500"}),e.jsx("div",{className:"absolute inset-0 h-10 w-10 border-2 border-amber-200 rounded-full animate-ping"})]}),e.jsx("p",{className:"mt-4 text-sm font-medium animate-pulse",children:"Loading prizes..."})]}):b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 animate-in fade-in zoom-in-50 duration-700",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 animate-bounce",children:e.jsx(he,{className:"h-8 w-8"})}),e.jsx("p",{className:"mt-4 font-medium text-gray-600",children:h||u!=="ALL"?"No prizes found":"No prizes yet"}),e.jsx("p",{className:"mt-1 text-sm",children:h||u!=="ALL"?"Try adjusting your filters":"Create your first prize above"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden overflow-x-auto md:block",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50/80 text-xs font-medium uppercase tracking-wider text-gray-500",children:[e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Title"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Type"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Value"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Spin Label"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Items"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Created"}),e.jsx("th",{className:"px-5 py-3.5 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map((a,t)=>e.jsxs("tr",{className:`transition-all duration-200 hover:bg-gray-50/80 hover:shadow-sm animate-in fade-in slide-in-from-bottom-1 ${i===a._id?"bg-blue-50/30 shadow-sm":""}`,style:{animationDelay:`${t*50}ms`},children:[e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-amber-100 transition-all duration-200 group-hover:scale-110 group-hover:bg-amber-200",children:e.jsx(y,{className:"h-4 w-4 text-amber-600"})}),e.jsx("span",{className:"font-semibold text-gray-800 transition-colors duration-200 group-hover:text-gray-900",children:a.title})]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs font-medium transition-all duration-200 hover:scale-105 ${M(a.type)}`,children:[_(a.type),a.type]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"font-medium text-gray-700",children:a.value})}),e.jsx("td",{className:"px-5 py-4",children:a.spinWheelLabel?e.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(S,{className:"h-3.5 w-3.5 text-amber-500 animate-pulse"}),a.spinWheelLabel]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-5 py-4",children:a.supportiveItems&&a.supportiveItems.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.supportiveItems.slice(0,2).map((n,m)=>e.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600 transition-all duration-200 hover:bg-gray-200 hover:scale-105",children:n},m)),a.supportiveItems.length>2&&e.jsxs("span",{className:"inline-flex items-center rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600 transition-all duration-200 hover:bg-gray-200 hover:scale-105",children:["+",a.supportiveItems.length-2]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-gray-500",children:[e.jsx(V,{className:"h-3.5 w-3.5"}),new Date(a.createdAt).toLocaleDateString()]})}),e.jsx("td",{className:"px-5 py-4 text-right",children:e.jsx(H,{actions:[{label:"Edit",onClick:()=>A(a)},{label:"Delete",destructive:!0,onClick:()=>T(a._id,a.title)}]})})]},a._id))})]})}),e.jsx("div",{className:"divide-y divide-gray-100 md:hidden",children:b.map((a,t)=>e.jsxs("div",{className:`p-4 transition-all duration-200 hover:bg-gray-50/80 animate-in fade-in slide-in-from-bottom-2 ${i===a._id?"bg-blue-50/30 border-l-4 border-blue-500":""}`,style:{animationDelay:`${t*50}ms`},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-amber-100 transition-all duration-200 group-hover:scale-110 group-hover:bg-amber-200 group-hover:shadow-md",children:e.jsx(y,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 transition-colors duration-200 group-hover:text-gray-900",children:a.title}),e.jsx("p",{className:"mt-0.5 text-sm font-medium text-gray-600",children:a.value})]})]}),e.jsx(H,{actions:[{label:"Edit",onClick:()=>A(a)},{label:"Delete",destructive:!0,onClick:()=>T(a._id,a.title)}]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs font-medium transition-all duration-200 hover:scale-105 ${M(a.type)}`,children:[_(a.type),a.type]}),a.spinWheelLabel&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2.5 py-1 text-xs text-gray-600 transition-all duration-200 hover:bg-gray-200 hover:scale-105",children:[e.jsx(S,{className:"h-3 w-3 text-amber-500 animate-pulse"}),a.spinWheelLabel]})]}),a.supportiveItems&&a.supportiveItems.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:a.supportiveItems.map((n,m)=>e.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-100 px-2 py-0.5 text-xs text-gray-600 transition-all duration-200 hover:bg-gray-200 hover:scale-105",children:n},m))}),e.jsxs("p",{className:"mt-3 flex items-center gap-1 text-xs text-gray-400",children:[e.jsx(V,{className:"h-3 w-3"}),"Created ",new Date(a.createdAt).toLocaleDateString()]})]},a._id))})]})})]})]})})}export{Ae as default};
