import{D as I,j as e,z as P,B as k,a as g,r as b,H as W,E as f,a2 as G,a3 as X,a4 as T,a5 as Y,a6 as J,a7 as z,O as Q,Q as Z,T as ee,U as ae,M as se,P as te,J as v,ah as R,b$ as re,c0 as le,c1 as ne,cu as oe,c2 as ie,s as ce,W as de,Y as xe,Z as me,$ as pe,_ as V,a1 as he,N as D,aq as O,i as ue,A as be,cv as ge,cw as je}from"./index-Cah9GgNi.js";import{P as fe}from"./headSubhead-C7X6Yce6.js";import{u as Ne,f as $,I as ve,a as ye,b as we,g as Ce,c as Se}from"./index-BXaOFAvc.js";import{L as Pe}from"./label-DJ1n1SI_.js";import{S as y,a as w,b as C,c as S,d as j}from"./select-DxUcbfzd.js";import{S as ke,a as Ie}from"./stats.grid-abFdXFev.js";import{a as L,I as Ae}from"./IconX-D4kkSzeq.js";import{I as H,A as K,a as Me}from"./index-Dq74rUHN.js";import{A as _}from"./index-Eb3V4Lej.js";import{A as E}from"./arrow-up-down-CNYF-QmJ.js";import{C as q}from"./copy-D_bSaBc8.js";import{S as U}from"./smartphone-BFpoTc86.js";import{E as Te}from"./ellipsis-BTTzz4hy.js";import{E as De}from"./eye-Ud1Tzidn.js";import{C as Ee}from"./circle-play-Cxdp-9HA.js";import{f as B}from"./formatDistanceToNow-SCnc4N16.js";import{I as qe}from"./IconActivity-EvkmQ6cq.js";import{U as Le}from"./users-DY5vQYIt.js";import{C as ze}from"./circle-check-big-ChBinIN1.js";import{T as Re}from"./trending-up-CHGBVvFI.js";import{C as F}from"./credit-card-excIgfD4.js";import"./index-657d2hlm.js";import"./IconLoader-QBct0fFV.js";import"./endOfMonth-D35K41iH.js";const Ve=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],$e=I("messages-square",Ve);const _e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Be=I("monitor",_e);const Fe=[["path",{d:"M21 8L18.74 5.74A9.75 9.75 0 0 0 12 3C11 3 10.03 3.16 9.13 3.47",key:"1krf6h"}],["path",{d:"M8 16H3v5",key:"1cv678"}],["path",{d:"M3 12C3 9.51 4 7.26 5.64 5.64",key:"ruvoct"}],["path",{d:"m3 16 2.26 2.26A9.75 9.75 0 0 0 12 21c2.49 0 4.74-1 6.36-2.64",key:"19q130"}],["path",{d:"M21 12c0 1-.16 1.97-.47 2.87",key:"4w8emr"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M22 22 2 2",key:"1r8tn9"}]],Oe=I("refresh-cw-off",Fe);const He=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ke=I("star",He),u=({label:a,value:t,onClear:s,colorClass:o})=>e.jsx(P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"shrink-0",children:e.jsxs(k,{variant:"secondary",className:g("p-1.5 px-2 gap-1 border-dashed shadow-sm whitespace-nowrap",o),children:[e.jsxs("span",{className:"text-[10px] font-bold uppercase opacity-60",children:[a,":"]}),e.jsx("span",{className:"uppercase text-xs",children:t}),e.jsx("button",{onClick:s,className:"ml-1 p-0.5 rounded-full hover:bg-black/10 transition-colors",children:e.jsx(L,{size:12})})]})});function Ue({columns:a,data:t,rowCount:s,pagination:o,onPaginationChange:c,searchPlaceholder:x="Search...",globalFilter:m,setGlobalFilter:i,isLoading:N,meta:p,filters:r}){const[A,M]=b.useState([]),n=Ne({data:t,columns:a,rowCount:s,onSortingChange:M,manualSorting:!1,manualPagination:!0,manualFiltering:!0,onPaginationChange:c,onGlobalFilterChange:i,getSortedRowModel:Se(),getCoreRowModel:Ce(),state:{sorting:A,pagination:o,globalFilter:m},meta:p}),h=r.status||r.plan||r.platform;return e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-2 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[280px] max-w-md",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 z-10"}),e.jsx(W,{placeholder:x,className:"pl-9 pr-10 bg-white border-slate-200 h-11 shadow-sm focus-visible:ring-brand-aqua rounded-xl transition-all",value:m??"",onChange:l=>i(l.target.value)}),m&&e.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-full p-1 bg-slate-100 hover:bg-slate-200 transition-colors",children:e.jsx(L,{className:"h-3 w-3 text-slate-600"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-start lg:justify-end gap-3 flex-[2]",children:[e.jsx("div",{className:"hidden md:flex flex-wrap items-center gap-2",children:e.jsxs(_,{mode:"popLayout",children:[r.status&&e.jsx(u,{label:"Status",value:r.status,onClear:()=>r.setStatus(""),colorClass:"bg-indigo-50 border-indigo-300 text-indigo-700"}),r.plan&&e.jsx(u,{label:"Plan",value:r.plan,onClear:()=>r.setPlan(""),colorClass:"bg-amber-50 border-amber-300 text-amber-700"}),r.platform&&e.jsx(u,{label:"Platform",value:r.platform,onClear:()=>r.setPlatform(""),colorClass:"bg-cyan-50 border-cyan-300 text-cyan-700"})]})}),h&&e.jsx("div",{className:"hidden lg:block w-px h-6 bg-slate-200 mx-1"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(y,{value:r.status,onValueChange:r.setStatus,children:[e.jsx(w,{className:g("h-10 w-max bg-white",r.status&&"border-indigo-500 ring-1 ring-indigo-500"),children:e.jsx(C,{placeholder:"Status"})}),e.jsx(S,{children:["ACTIVE","EXPIRED","CANCELLED","PENDING"].map(l=>e.jsx(j,{value:l,children:l},l))})]}),e.jsxs(y,{value:r.plan,onValueChange:r.setPlan,children:[e.jsx(w,{className:g("h-10 w-max bg-white",r.plan&&"border-amber-500 ring-1 ring-amber-500"),children:e.jsx(C,{placeholder:"Plan"})}),e.jsx(S,{children:["weekly","monthly","yearly","lifetime"].map(l=>e.jsx(j,{value:l,className:"capitalize",children:l},l))})]}),e.jsxs(y,{value:r.platform,onValueChange:r.setPlatform,children:[e.jsx(w,{className:g("h-10 w-max bg-white border-slate-200 transition-all",r.platform&&"border-brand-aqua ring-1 ring-brand-aqua bg-brand-aqua/10"),children:e.jsx(C,{placeholder:"Platform"})}),e.jsxs(S,{children:[e.jsx(j,{value:"ios",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:"IOS"})]})}),e.jsx(j,{value:"android",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{children:"Android"})]})}),r.platform&&e.jsx("button",{onClick:l=>{l.stopPropagation(),r.setPlatform("")},className:"w-full px-2 py-1.5 text-xs text-red-500 hover:bg-red-50 font-bold border-t mt-1",children:"Clear Platform"})]})]}),h&&e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>{r.setStatus(""),r.setPlan(""),r.setPlatform("")},className:"h-10 w-10 text-slate-400 hover:text-red-500 hover:bg-red-50",children:e.jsx(L,{size:18})})]})]})]}),e.jsx("div",{className:"flex md:hidden flex-wrap gap-2",children:e.jsxs(_,{children:[r.status&&e.jsx(u,{label:"Status",value:r.status,onClear:()=>r.setStatus(""),colorClass:"bg-indigo-50 text-indigo-700"}),r.plan&&e.jsx(u,{label:"Plan",value:r.plan,onClear:()=>r.setPlan(""),colorClass:"bg-amber-50 text-amber-700"}),r.platform&&e.jsx(u,{label:"OS",value:r.platform,onClear:()=>r.setPlatform(""),colorClass:"bg-cyan-50 text-cyan-700"})]})})]}),e.jsx("div",{className:"block rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:e.jsxs(G,{children:[e.jsx(X,{className:"bg-slate-50/50",children:n.getHeaderGroups().map(l=>e.jsx(T,{children:l.headers.map(d=>e.jsx(Y,{className:"text-slate-700 font-semibold h-10 bg-slate-100 text-xs",children:$(d.column.columnDef.header,d.getContext())},d.id))},l.id))}),e.jsx(J,{className:g(N&&"opacity-50 pointer-events-none transition-opacity"),children:n.getRowModel().rows?.length?n.getRowModel().rows.map(l=>e.jsx(T,{className:"hover:bg-slate-50/50",children:l.getVisibleCells().map(d=>e.jsx(z,{className:"py-3 px-0",children:$(d.column.columnDef.cell,d.getContext())},d.id))},l.id)):e.jsx(T,{children:e.jsx(z,{colSpan:a.length,className:"h-64 text-center",children:N?e.jsx(ke,{text:"Fetching data..."}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 space-y-2",children:[e.jsx(ve,{size:48,stroke:1}),e.jsx("p",{className:"text-sm font-medium",children:"No results found for your search"})]})})})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 py-2 border-t border-slate-100 mt-4 px-5 md:px-0",children:[e.jsxs("div",{className:"text-xs font-medium text-slate-500",children:["Showing ",t.length," of ",s," results"]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"hidden sm:block text-[10px] font-bold text-slate-400 uppercase",children:"Rows"}),e.jsxs(y,{value:`${n.getState().pagination.pageSize}`,onValueChange:l=>n.setPageSize(Number(l)),children:[e.jsx(w,{className:"h-8 w-[70px] text-xs",children:e.jsx(C,{})}),e.jsx(S,{children:[10,20,50].map(l=>e.jsx(j,{value:`${l}`,children:l},l))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>n.previousPage(),disabled:!n.getCanPreviousPage(),children:e.jsx(ye,{size:16})}),e.jsxs("div",{className:"text-xs font-semibold px-2",children:[n.getState().pagination.pageIndex+1," /"," ",n.getPageCount()]}),e.jsx(f,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>n.nextPage(),disabled:!n.getCanNextPage(),children:e.jsx(we,{size:16})})]})]})]})]})}const We=[{id:"sno",header:()=>e.jsx("div",{className:"w-10 text-center text-xs",children:"S.No"}),cell:({row:a,table:t})=>{const{pageIndex:s,pageSize:o}=t.getState().pagination,c=s*o+a.index+1;return e.jsx("div",{className:"w-10 text-center font-medium",children:c})},enableSorting:!1,enableHiding:!1},{id:"user",accessorFn:a=>a.user,header:({column:a})=>e.jsxs(f,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"text-xs",children:["User",e.jsx(E,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{const t=a.original?.user;console.log("user: ",t);const s=t?.nickname||"unknown",o=t?.avatar.url||Q;return e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsxs(Z,{className:"h-8 w-8",children:[e.jsx(ee,{src:o,alt:s}),e.jsx(ae,{children:s.charAt(0).toUpperCase()})]}),e.jsx("span",{className:"font-bold text-[11px] truncate",children:s})]})}},{accessorKey:"userId.email",header:"Email Address",cell:({row:a})=>{const t=a.original?.user?.email||"-",s=()=>{navigator.clipboard.writeText(t),D.success("Email copied",{id:"email-copy"})};return e.jsxs("div",{className:"flex items-center group gap-2 w-max text-[12px]",children:[e.jsx(se,{className:"w-3.5 h-3.5 text-brand-aqua",strokeWidth:2.5}),e.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-700 truncate",children:[t,e.jsx(q,{onClick:s,title:"Copy Email",className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-brand-aqua"})]})]})}},{accessorKey:"userId.phone",header:"Phone Number",cell:({row:a})=>{const t=a.original?.user?.phone||"-",s=()=>{navigator.clipboard.writeText(t),D.success("Phone copied",{id:"phone-copy"})};return e.jsxs("div",{className:"flex items-center group gap-2 w-max text-[12px]",children:[e.jsx(te,{className:"w-3.5 h-3.5 text-brand-aqua",strokeWidth:2.5}),e.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-700 truncate",children:[t,e.jsx(q,{onClick:s,title:"Copy Phone",className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity text-slate-400 hover:text-brand-aqua"})]})]})}},{accessorKey:"planType",header:"Subscription Plan",cell:({row:a})=>{const t=a.getValue("planType")?.toLowerCase(),o={monthly:{color:"bg-blue-50 text-blue-700 border-blue-200",icon:e.jsx(v,{className:"w-3 h-3"}),label:"Monthly"},yearly:{color:"bg-purple-50 text-purple-700 border-purple-200",icon:e.jsx(Ke,{className:"w-3 h-3"}),label:"Yearly"},lifetime:{color:"bg-amber-50 text-amber-700 border-amber-200",icon:e.jsx(O,{className:"w-3 h-3"}),label:"Lifetime"}}[t]||{color:"bg-slate-50 text-slate-600 border-slate-200",icon:e.jsx(v,{className:"w-3 h-3"}),label:t};return e.jsxs("div",{className:`flex items-center w-fit gap-1.5 px-2 py-0.5 rounded-full border text-[11px] font-bold uppercase ${o.color}`,children:[o.icon,o.label]})}},{accessorKey:"status",header:"Status",cell:({row:a})=>{const s=(a.getValue("status")||"").toUpperCase(),o={ACTIVE:"bg-emerald-100 text-emerald-700 border-emerald-200",EXPIRED:"bg-rose-100 text-rose-700 border-rose-200",CANCELLED:"bg-slate-100 text-slate-700 border-slate-200",PENDING:"bg-amber-100 text-amber-700 border-amber-200"};return e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(k,{className:`${o[s]||"bg-blue-100 text-blue-700 border-blue-200"} border shadow-none font-semibold px-2.5 py-0.5 transition-colors`,children:[s==="ACTIVE"&&e.jsxs("span",{className:"relative flex h-2 w-2 mr-1.5",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),s]})})}},{accessorKey:"platform",header:"Platform",cell:({row:a})=>{const t=a.getValue("platform")?.toLowerCase(),s={ios:e.jsx(H,{className:"w-3.5 h-3.5 mb-0.5"}),android:e.jsx(Ee,{className:"w-3.5 h-3.5 mb-0.5 text-green-600"}),web:e.jsx(Be,{className:"w-3.5 h-3.5 mb-0.5"})},o={ios:"bg-zinc-100 text-zinc-900 border-zinc-200",android:"bg-green-50 text-green-700 border-green-100",web:"bg-blue-50 text-blue-700 border-blue-100"};return e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:`
            inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md border text-[11px] font-bold tracking-tight uppercase
            ${o[t]||"bg-slate-50 text-slate-600"}
          `,children:[s[t]||e.jsx(U,{className:"w-3.5 h-3.5"}),t]})})}},{accessorKey:"createdAt",header:({column:a})=>e.jsxs("button",{className:"flex items-center hover:text-gray-900 transition-colors",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Buy At",e.jsx(E,{className:"ml-2 h-3 w-3 opacity-50"})]}),cell:({row:a})=>{const t=a.original?.createdAt;if(!t)return e.jsx("span",{className:"text-sm text-slate-400 italic",children:"-"});const s=new Date(t);return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-slate-900",children:B(s,{addSuffix:!0})}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-500",children:[e.jsx(v,{className:"h-2.5 w-2.5 opacity-70"}),e.jsx("span",{children:R(s,"MMM dd, yyyy p")})]})]})}},{accessorKey:"expiresAt",header:({column:a})=>e.jsxs("button",{className:"flex items-center hover:text-gray-900 transition-colors",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Expiry Date",e.jsx(E,{className:"ml-2 h-3 w-3 opacity-50"})]}),cell:({row:a})=>{const t=a.original?.expiresAt;if(!t)return e.jsx("span",{className:"text-sm text-slate-400 italic",children:"-"});const s=new Date(t);return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-slate-900",children:B(s,{addSuffix:!0})}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-500",children:[e.jsx(v,{className:"h-2.5 w-2.5 opacity-70"}),e.jsx("span",{children:R(s,"MMM dd, yyyy p")})]})]})}},{accessorKey:"autoRenew",header:"Auto-Renew",cell:({row:a})=>{const t=!!a.getValue("autoRenew");return e.jsx(re,{children:e.jsxs(le,{children:[e.jsx(ne,{asChild:!0,children:e.jsx("div",{className:"flex justify-start items-center",children:e.jsxs("span",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-[11px] font-bold border transition-all ${t?"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-slate-50 text-slate-500 border-slate-200"}`,children:[t?e.jsx(oe,{className:"w-3 h-3 animate-spin-slow"}):e.jsx(Oe,{className:"w-3 h-3"}),t?"ENABLED":"DISABLED"]})})}),e.jsx(ie,{children:e.jsx("p",{children:t?"Subscription will renew automatically":"Manual renewal required"})})]})})}},{id:"actions",header:"Actions",cell:({row:a})=>{const t=a.original;console.log("subscription: ",t?.user?.userId);const s=ce(),o=c=>{navigator.clipboard.writeText(c),D.success("ID copied to clipboard",{icon:e.jsx($e,{className:"h-4 w-4 font-bold text-slate-600"}),style:{borderRadius:"10px",background:"#333",color:"#fff"}})};return e.jsxs(de,{children:[e.jsx(xe,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-slate-100",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4 text-slate-600"})]})}),e.jsxs(me,{align:"end",className:"w-48 p-2",children:[e.jsx(pe,{className:"text-[10px] uppercase text-slate-400 font-bold px-2 py-1.5",children:"Subscription Options"}),e.jsxs(V,{className:"gap-3 cursor-pointer py-2",onClick:()=>s(`./view-subscription/${t?.user?.userId}`,{state:{subscriptionData:t}}),children:[e.jsx(De,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:"View Details"})]}),e.jsxs(V,{className:"gap-2 cursor-pointer py-2",onClick:()=>o(t._id),children:[e.jsx(q,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:"Copy Sub ID"})]}),e.jsx(he,{})]})]})}}],Ge=({stats:a})=>{const t=[{label:"Expired",val:a?.expired,color:"bg-red-50 text-red-700"},{label:"Cancelled",val:a?.cancelled,color:"bg-slate-50 text-slate-700"},{label:"Grace",val:a?.grace,color:"bg-orange-50 text-orange-700"},{label:"Paused",val:a?.paused,color:"text-purple-700 bg-purple-50"},{label:"Revoked",val:a?.revoked,color:"text-rose-700 bg-rose-50"},{label:"Pending",val:a?.pending,color:"text-blue-700 bg-blue-50"}];return e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-brand-aqua/40 hover:border-brand-aqua/80 transition-all duration-500 shadow-md",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})," ","Status Breakdown"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map(s=>e.jsxs("div",{className:`flex justify-between items-center p-2 rounded-lg border border-transparent ${s.color}`,children:[e.jsx("span",{className:"text-[11px] font-bold uppercase",children:s.label}),e.jsx("span",{className:"font-bold",children:s.val||0})]},s.label))})]})},Xe=({stats:a})=>e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-brand-aqua/40 hover:border-brand-aqua/80 transition-all duration-500 shadow-md",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})," By Plan Type"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(a?.byPlan||{}).map(([t,s])=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1 uppercase font-semibold text-gray-500",children:[e.jsx("span",{children:t}),e.jsx("span",{children:s})]}),e.jsx("div",{className:"relative h-3 w-full bg-slate-400/30 rounded-full overflow-hidden border border-slate-200/50 shadow-inner",children:e.jsx(P.div,{initial:{width:0},animate:{width:`${s/a?.total*100}%`},transition:{duration:1,ease:"easeInOut"},className:g("relative h-full rounded-full shadow-[0_0_20px_rgba(99,102,241,0.3)] bg-gradient-to-r from-brand-aqua/80 to-brand-aqua/40")})})]},t))})]}),Ye=({stats:a})=>e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-brand-aqua/40 hover:border-brand-aqua/80 transition-all duration-500 shadow-md",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})," ","Platform & Daily"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-around py-2 bg-slate-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-10 h-10 mx-auto text-black mb-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:"IOS"}),e.jsx("p",{className:"text-lg font-bold",children:a?.byPlatform?.android})]})]}),e.jsx("div",{className:"h-8 w-[1px] bg-gray-200"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-10 h-10 mx-auto text-green-600 mb-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase font-bold",children:"Android"}),e.jsx("p",{className:"text-lg font-bold",children:a?.byPlatform?.android})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Today's New Subs"}),e.jsxs(k,{variant:"outline",className:"text-emerald-600 bg-emerald-50 border-emerald-100",children:["+",a?.today?.newSubscriptions]})]}),e.jsxs("div",{className:"flex justify-between items-center px-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Today's Cancels"}),e.jsxs(k,{variant:"outline",className:"text-rose-600 bg-rose-50 border-rose-100",children:["-",a?.today?.cancellations]})]})]})]}),Je={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function ya(){const a=ue(),{subscriptions:t,stats:s,loading:o,pagination:c}=be(n=>n.subscription),[x,m]=b.useState({pageIndex:0,pageSize:10}),[i,N]=b.useState({search:"",status:"",plan:"",platform:"",sortBy:"",sortOrder:""});b.useEffect(()=>{a(ge())},[]),b.useEffect(()=>{const n=setTimeout(()=>{a(je({page:x.pageIndex+1,limit:x.pageSize,...i}))},500);return()=>clearTimeout(n)},[a,x,i]);const p=(n,h)=>{N(l=>({...l,[n]:h})),m(l=>({...l,pageIndex:0}))},r=b.useMemo(()=>{const n=(h,l)=>l?(h-l)/l*100:0;return[{label:"Total Users",val:s.total?.toLocaleString()||"0",icon:e.jsx(Le,{size:22}),color:"blue",description:"Lifetime growth",trend:n(s.total,s.previousTotal)},{label:"Active Now",val:s.active||0,icon:e.jsx(ze,{size:22}),color:"emerald",description:"Live sessions",trend:5.2},{label:"Today's Revenue",val:s.today?.revenue||0,icon:e.jsx(Re,{size:22}),color:"amber",description:"Gross earnings",trend:12.5},{label:"Daily Transactions",val:s.today?.transactions||0,icon:e.jsx(F,{size:22}),color:"purple",description:"Successful checkouts",trend:-2.4}]},[s,c?.total]),A={blue:"from-blue-500/40 to-blue-600/5 text-blue-600 border-blue-100",emerald:"from-emerald-500/40 to-emerald-600/5 text-emerald-600 border-emerald-100",amber:"from-amber-500/40 to-amber-600/5 text-amber-600 border-amber-100",purple:"from-purple-500/40 to-purple-600/5 text-purple-600 border-purple-100"},M={blue:"from-blue-300/20 via-blue-500/10 to-transparent text-blue-600 border-blue-200 hover:border-blue-400",emerald:"from-emerald-300/20 via-emerald-500/10 to-transparent text-emerald-600 border-emerald-200 hover:border-emerald-400",amber:"from-amber-300/20 via-amber-500/10 to-transparent text-amber-600 border-amber-200 hover:border-amber-400",purple:"from-purple-300/20 to-purple-500/10 to-transparent text-purple-600 border-purple-200 hover:border-purple-400"};return e.jsx("div",{className:"flex flex-1 flex-col min-h-screen p-4 bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100 pb-8",children:e.jsxs(P.div,{className:"max-w-7xl mx-auto w-full space-y-8",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 px-2",children:e.jsx(fe,{heading:"Subscription Management",icon:e.jsx(F,{className:"w-9 h-9 text-white animate-pulse"}),color:"bg-brand-aqua shadow-indigo-200",subheading:"Monitor active plans, renewals, and revenue streams."})}),e.jsx(P.div,{variants:Je,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 px-4",children:e.jsx(Ie,{stats:r,colorMap:A,bgMap:M})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 px-2 mt-6",children:[e.jsx(Ge,{stats:s}),e.jsx(Xe,{stats:s}),e.jsx(Ye,{stats:s})]}),e.jsx(Ue,{columns:We,data:t||[],rowCount:c?.total||0,pagination:x,onPaginationChange:m,globalFilter:i.search,setGlobalFilter:n=>p("search",n),filters:{status:i.status,setStatus:n=>p("status",n),plan:i.plan,setPlan:n=>p("plan",n),platform:i.platform,setPlatform:n=>p("platform",n)},isLoading:o})]})})}export{ya as default};
