import{j as e,O as q,B as h,a as j,E as w,r as u,H as A,z as N,W as L,Y as V,Z as H,$ as E,a0 as K,a1 as k,_ as $,a2 as B,a3 as W,a4 as C,a5 as G,a6 as O,a7 as P,s as U,i as _,A as Q,aQ as X,ar as Y,C as Z}from"./index-Cah9GgNi.js";import{P as J}from"./headSubhead-C7X6Yce6.js";import{F}from"./flag-C5b50tBx.js";import{T as D}from"./triangle-alert-1qeuYxI_.js";import{C as ee}from"./circle-alert-CnaEjTQV.js";import{I as ae}from"./info-CpdJOb3o.js";import{E as se}from"./eye-Ud1Tzidn.js";import{u as te,f as I,a as re,b as le,g as ie,c as ne}from"./index-BXaOFAvc.js";import{L as oe}from"./label-DJ1n1SI_.js";import{S as de,a as ce,b as me,c as xe,d as ue}from"./select-DxUcbfzd.js";import{T as he,D as pe}from"./data.not-found-BokaeWBd.js";import{I as ge,a as S}from"./IconX-D4kkSzeq.js";import{A as R}from"./index-Eb3V4Lej.js";import{I as be}from"./IconFilter-D5y8yHeQ.js";import{C as je}from"./chart-column-ZCxNQmdv.js";import{C as fe}from"./clock-BveIEetd.js";import{S as we}from"./shield-alert-DrSlsao2.js";import"./index-657d2hlm.js";import"./IconLoader-QBct0fFV.js";const Ne=m=>[{accessorKey:"nickname",header:"User Profile",cell:({row:r})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:r.original.profilePhoto||q,className:"w-8 h-8 rounded-full object-cover",alt:"avatar"}),e.jsx("span",{className:"font-medium text-[13px] text-slate-700",children:r.getValue("nickname")})]})},{accessorKey:"reportCount",header:"Reports",cell:({row:r})=>{const s=r.getValue("reportCount"),o=p=>p>=5?"text-red-600 bg-red-50 border-red-200":p>=3?"text-amber-600 bg-amber-50 border-amber-200":"text-blue-600 bg-blue-50 border-blue-200";return e.jsxs(h,{variant:"outline",className:j("gap-1 w-max font-bold",o(s)),children:[e.jsx(F,{className:"w-3 h-3"}),s," report",s!==1?"s":""]})}},{accessorKey:"lastReportedAt",header:"Last Reported",cell:({row:r})=>{const s=r.getValue("lastReportedAt");if(!s)return e.jsx("span",{className:"text-slate-400",children:"-"});const o=new Date(s);return e.jsxs("div",{className:"text-sm w-max",children:[e.jsx("div",{className:"text-slate-900 font-medium",children:o.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("div",{className:"text-slate-500 text-xs",children:o.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})})]})}},{accessorKey:"status",header:"Status",cell:({row:r})=>{const s=r.getValue("status"),o={resolved:"bg-emerald-50 text-emerald-700 border-emerald-100",pending:"bg-amber-50 text-amber-700 border-amber-100",new:"bg-red-50 text-red-700 border-red-100"};return e.jsx(h,{className:j("capitalize border",o[s]||"bg-slate-50"),children:s})}},{accessorKey:"reportCount",id:"reportCountDisplay",header:"Priority",cell:({row:r})=>{const s=r.getValue("reportCount");return s>=5?e.jsxs(h,{className:"bg-red-100 text-red-700 border-red-300",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"HIGH"]}):s>=3?e.jsxs(h,{className:"bg-amber-100 text-amber-700 border-amber-300",children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),"MEDIUM"]}):e.jsxs(h,{className:"bg-blue-100 text-blue-700 border-blue-300",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"LOW"]})}},{id:"actions",header:"Actions",size:100,cell:({row:r})=>e.jsxs(w,{variant:"ghost",size:"sm",className:"text-black font-medium border border-brand-aqua shadow-sm bg-brand-aqua/20 hover:bg-brand-aqua/60",onClick:()=>m(`/admin/management/profile-reports/review/${r.original?.userId}`),children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Review"]})}];function ve({columns:m,data:r,rowCount:s,pagination:o,onPaginationChange:p,searchPlaceholder:g="Search...",globalFilter:b,setGlobalFilter:x,isLoading:f,meta:d,filters:l}){const[v,y]=u.useState([]),i=te({data:r,columns:m,rowCount:s,onSortingChange:y,manualSorting:!1,manualPagination:!0,manualFiltering:!0,onPaginationChange:p,onGlobalFilterChange:x,getSortedRowModel:ne(),getCoreRowModel:ie(),state:{sorting:v,pagination:o,globalFilter:b},meta:d}),t=l.statusFilter;return e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row md:items-center justify-between gap-4 bg-slate-50/50 p-2 rounded-xl",children:[e.jsxs("div",{className:"relative w-3/5 md:w-1/3",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 z-10"}),e.jsx(A,{placeholder:g,className:"pl-9 pr-10 bg-white border-slate-200 h-10 shadow-md focus-visible:ring-brand-aqua rounded-lg",value:b??"",onChange:a=>x(a.target.value)}),b&&e.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 group flex items-center justify-center rounded-full p-1 bg-brand-aqua/30 hover:bg-brand-aqua transition-colors duration-200","aria-label":"Clear search",children:e.jsx(S,{className:"h-4 w-4 text-slate-600 group-hover:text-slate-800 transition-colors"})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 min-w-0 flex-1 ml-4",children:[e.jsx("div",{className:"hidden sm:flex flex-1 items-center justify-end gap-2 overflow-x-hidden min-w-0",children:e.jsx(R,{mode:"popLayout",children:l.statusFilter&&e.jsx(N.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,scale:.95},className:"shrink-0",children:e.jsxs(h,{variant:"secondary",className:"p-2 gap-1 bg-indigo-100 border-dashed border-indigo-400 text-indigo-700 shadow-sm whitespace-nowrap",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase opacity-50",children:"Status:"}),e.jsx("span",{className:"capitalize text-xs",children:l.statusFilter}),e.jsx("button",{onClick:()=>l.setStatusFilter(""),className:"ml-1 p-0.5 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(S,{size:12})})]})},"status-chip")})}),t&&e.jsx("div",{className:"hidden sm:block w-0.5 h-6 bg-slate-200 shrink-0"}),e.jsx("div",{className:"shrink-0",children:e.jsxs(L,{children:[e.jsx(V,{asChild:!0,children:e.jsxs(w,{variant:"outline",className:j("h-10 border-brand-aqua/80 shadow-sm bg-brand-aqua/5 hover:bg-brand-aqua/30 transition-all whitespace-nowrap",t&&"border-brand-aqua ring-1 ring-brand-aqua"),children:[e.jsx(be,{strokeWidth:2.5,className:j("h-6 w-6",t?"text-brand-aqua":"text-brand-aqua/60")}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filters"}),t&&e.jsx("span",{className:"ml-2 flex h-5 w-5 items-center justify-center rounded-full bg-brand-aqua text-[10px] text-white font-bold",children:+!!l.statusFilter})]})}),e.jsxs(H,{align:"end",className:"w-44 p-2 shadow-xl border-slate-200",children:[e.jsx(E,{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:"Reports Status"}),["new","pending","reviewed","resolved"].map(a=>e.jsx(K,{className:"capitalize",checked:l.statusFilter===a,onCheckedChange:()=>l.setStatusFilter(a),children:a},a)),e.jsx(k,{}),t&&e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsx($,{className:"text-red-600 justify-center font-medium focus:bg-red-50 focus:text-red-700 cursor-pointer",onClick:()=>{l.setStatusFilter("")},children:"Clear All Filters"})]})]})]})})]})]}),e.jsx("div",{className:"flex justify-end sm:hidden flex-wrap gap-2 px-1",children:e.jsx(R,{children:t&&e.jsx(N.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-wrap items-center gap-2",children:l.statusFilter&&e.jsxs(h,{variant:"secondary",className:"bg-indigo-50 text-indigo-700 border-indigo-100 py-1",children:["Status:",e.jsx("span",{className:"capitalize ml-1",children:l.statusFilter}),e.jsx("button",{onClick:()=>l.setStatusFilter(""),className:"ml-1",children:e.jsx(S,{size:12})})]})})})})]}),e.jsx("div",{className:"block rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:e.jsxs(B,{children:[e.jsx(W,{className:"bg-slate-50/50",children:i.getHeaderGroups().map(a=>e.jsx(C,{children:a.headers.map(n=>e.jsx(G,{className:"text-slate-700 w-max pl-10 font-semibold h-10 bg-slate-100 text-xs",children:I(n.column.columnDef.header,n.getContext())},n.id))},a.id))}),e.jsx(O,{className:j(f&&"opacity-50 pointer-events-none transition-opacity"),children:i.getRowModel().rows?.length?i.getRowModel().rows.map(a=>e.jsx(C,{className:"hover:bg-slate-50/50",children:a.getVisibleCells().map(n=>e.jsx(P,{className:"py-3 pl-10",children:I(n.column.columnDef.cell,n.getContext())},n.id))},a.id)):e.jsx(C,{children:e.jsx(P,{colSpan:m.length,className:"h-64 text-center",children:f?e.jsx(he,{text:"Fetching data..."}):e.jsx(pe,{message:"No results found for your search"})})})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 py-2 border-t border-slate-100 mt-4 px-5 md:px-0",children:[e.jsxs("div",{className:"text-xs font-medium text-slate-500",children:["Showing ",r.length," of ",s," results"]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"hidden sm:block text-[10px] font-bold text-slate-400 uppercase",children:"Rows"}),e.jsxs(de,{value:`${i.getState().pagination.pageSize}`,onValueChange:a=>i.setPageSize(Number(a)),children:[e.jsx(ce,{className:"h-8 w-[70px] text-xs",children:e.jsx(me,{})}),e.jsx(xe,{children:[10,20,50].map(a=>e.jsx(ue,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:e.jsx(re,{size:16})}),e.jsxs("div",{className:"text-xs font-semibold px-2",children:[i.getState().pagination.pageIndex+1," /"," ",i.getPageCount()]}),e.jsx(w,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:e.jsx(le,{size:16})})]})]})]})]})}const ye={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},Ce={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}};function We(){const m=U(),r=_(),{list:s,pagination:o,loading:p}=Q(t=>t.profileReview),[g,b]=u.useState(""),[x,f]=u.useState(""),[d,l]=u.useState({pageIndex:0,pageSize:10});u.useEffect(()=>{const t=setTimeout(()=>{r(X({page:d.pageIndex+1,limit:d.pageSize,search:g,status:x}))},500);return()=>clearTimeout(t)},[r,d.pageIndex,d.pageSize,g,x]);const v=u.useMemo(()=>Ne(m),[m]),y=u.useMemo(()=>{const t={total:d?.total||s.length,new:s.filter(c=>c.status==="pending"||c.status==="new").length,pending:s.filter(c=>c.status==="in_progress").length,resolved:s.filter(c=>c.status==="resolved").length,highPriority:s.filter(c=>c.severity==="high").length},{total:a,new:n,pending:T,resolved:z,highPriority:M}=t;return[{label:"Total Reports",value:a,icon:je,color:"blue"},{label:"New",value:n,icon:D,color:"red"},{label:"Pending",value:T,icon:fe,color:"amber"},{label:"Resolved",value:z,icon:Y,color:"emerald"},{label:"High Priority",value:M,icon:F,color:"purple"}]},[s,d?.total]),i={blue:"from-blue-50 to-blue-100 border-blue-200 text-blue-600 shadow-blue-100/50",red:"from-red-50 to-red-100 border-red-200 text-red-600 shadow-red-100/50",amber:"from-amber-50 to-amber-100 border-amber-200 text-amber-600 shadow-amber-100/50",emerald:"from-emerald-50 to-emerald-100 border-emerald-200 text-emerald-600 shadow-emerald-100/50",purple:"from-purple-50 to-purple-100 border-purple-200 text-purple-600 shadow-purple-100/50"};return e.jsx("div",{className:"flex flex-1 flex-col min-h-screen p-4 bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100 pb-8",children:e.jsxs(N.div,{className:"space-y-6",initial:"hidden",animate:"visible",variants:ye,children:[e.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 px-2",children:e.jsx(J,{heading:"Reported Profiles",icon:e.jsx(we,{className:"w-9 h-9 text-white animate-pulse"}),color:"bg-red-500 shadow-red-500/20",subheading:"Review and manage user safety reports."})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 px-2",children:y.map((t,a)=>{const n=t.icon;return e.jsx(N.div,{variants:Ce,children:e.jsx(Z,{className:`p-5 border bg-gradient-to-br shadow-sm transition-shadow hover:shadow-md ${i[t.color]}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider opacity-80",children:t.label}),e.jsx("p",{className:"text-3xl font-black tabular-nums",children:t.value.toLocaleString()})]}),e.jsx("div",{className:"p-2 bg-white/50 rounded-xl backdrop-blur-sm",children:e.jsx(n,{className:"w-6 h-6 opacity-80"})})]})})},t.label)})}),e.jsx(ve,{columns:v,data:s||[],rowCount:o?.total||0,isLoading:p,pagination:d,onPaginationChange:l,globalFilter:g,setGlobalFilter:t=>{b(t),l(a=>({...a,pageIndex:0}))},searchPlaceholder:"Search by nickname...",filters:{statusFilter:x,setStatusFilter:t=>{f(t),l(a=>({...a,pageIndex:0}))}}})]})})}export{We as default};
