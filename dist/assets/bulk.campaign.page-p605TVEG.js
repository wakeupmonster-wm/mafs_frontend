import{j as e,B as h,r as d,H as u,E as j,i as b,A as v,as as N,at as D,C as S,m as C,n as w,J as y,o as I,p as k,aD as E}from"./index-Cah9GgNi.js";import{C as f}from"./circle-check-big-ChBinIN1.js";import{T as z}from"./triangle-alert-1qeuYxI_.js";import{I as A}from"./info-CpdJOb3o.js";import{S as B,a as P,b as T,c as L,d as R}from"./select-DxUcbfzd.js";import{L as q}from"./loader-circle-D_OERo1u.js";import{C as F}from"./circle-alert-CnaEjTQV.js";function O({summary:t}){const n=l=>new Date(l).toLocaleDateString("en-IN",{day:"2-digit",month:"short"});return e.jsxs("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 border rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"text-emerald-500 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Created"}),e.jsx("p",{className:"text-xl font-bold",children:t.created})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"text-amber-500 w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Skipped"}),e.jsx("p",{className:"text-xl font-bold",children:t.skipped})]})]})]}),t.skipped>0&&e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-3 py-2 text-xs font-bold flex items-center gap-2",children:[e.jsx(A,{className:"w-3 h-3"})," REASONS FOR SKIPPED DATES"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto divide-y",children:t.skippedDates.map((l,c)=>e.jsxs("div",{className:"px-3 py-2 flex justify-between items-center text-sm",children:[e.jsx("span",{className:"font-medium",children:n(l.date)}),e.jsx(h,{variant:"outline",className:"text-[10px]",children:l.reason})]},c))})]})]})}function G({prizes:t,onSubmit:n,isSubmitting:l,isPrizesLoading:c}){const[a,r]=d.useState({startDate:"",endDate:"",prizeId:"",supportiveItems:""}),[i,m]=d.useState({}),o=()=>{const s={},p=new Date(a.startDate),g=new Date(a.endDate);return a.startDate||(s.startDate="Start date required"),a.endDate||(s.endDate="End date required"),a.startDate&&a.endDate&&p>g&&(s.dateRange="End date cannot be before start date"),a.prizeId||(s.prizeId="Please select a prize"),m(s),Object.keys(s).length===0},x=()=>{if(!o())return;const s=a.supportiveItems.split(",").map(p=>p.trim()).filter(Boolean);n({...a,supportiveItems:s}),r({startDate:"",endDate:"",prizeId:"",supportiveItems:""})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Start Date"}),e.jsx(u,{type:"date",value:a.startDate,onChange:s=>r({...a,startDate:s.target.value}),className:i.startDate?"border-red-500":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold",children:"End Date"}),e.jsx(u,{type:"date",value:a.endDate,onChange:s=>r({...a,endDate:s.target.value}),className:i.endDate?"border-red-500":""})]})]}),i.dateRange&&e.jsx("p",{className:"text-red-500 text-xs",children:i.dateRange}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Select Prize"}),e.jsxs(B,{value:a.prizeId,onValueChange:s=>r({...a,prizeId:s}),children:[e.jsx(P,{children:e.jsx(T,{placeholder:c?"Loading...":"Select Prize"})}),e.jsx(L,{children:t.map(s=>e.jsx(R,{value:s._id,disabled:!s.isActive,children:e.jsxs("div",{className:"flex justify-between w-full gap-4",children:[e.jsx("span",{children:s.title}),e.jsx(h,{variant:s.isActive?"success":"secondary",children:s.isActive?"Active":"Inactive"})]})},s._id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold",children:"Supportive Items (Optional)"}),e.jsx(u,{placeholder:"Item 1, Item 2...",value:a.supportiveItems,onChange:s=>r({...a,supportiveItems:s.target.value})})]}),e.jsx(j,{className:"w-full mt-2 bg-brand-aqua/20 hover:bg-brand-aqua/60 border border-brand-aqua text-slate-800 font-semibold gap-2 h-11 px-4 shadow-sm shadow-neutral-400",onClick:x,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 animate-spin"})," Processing..."]}):"Generate Campaigns"})]})}function U(){const t=b(),{prizes:n,loading:l,bulkCampaignLoading:c,error:a,successMessage:r,bulkCampaignSummary:i}=v(s=>s.giveaway),[m,o]=d.useState(!1);d.useEffect(()=>{t(N())},[t]),d.useEffect(()=>{if(r||a){const s=setTimeout(()=>{t(D()),o(!1)},1e4);return()=>clearTimeout(s)}},[r,a,t]),d.useEffect(()=>{i&&o(!0)},[i]);const x=s=>{t(E({ranges:[s],isActive:!0}))};return e.jsx("div",{className:"p-4 flex justify-center",children:e.jsxs(S,{className:"w-full max-w-3xl shadow-lg border-none",children:[e.jsxs(C,{className:"bg-slate-50/50 border-b",children:[e.jsxs(w,{className:"flex items-center gap-2 text-xl",children:[e.jsx(y,{className:"w-6 h-6 text-primary"}),"Bulk Create Campaigns"]}),e.jsx(I,{children:"Schedule multiple giveaway campaigns across a specific date range."})]}),e.jsxs(k,{className:"pt-2 pb-0 space-y-6",children:[r&&e.jsxs("div",{className:"flex items-center gap-2 p-3 text-sm bg-emerald-50 border border-emerald-200 text-emerald-800 rounded-lg",children:[e.jsx(f,{className:"w-4 h-4"})," ",r]}),a&&e.jsxs("div",{className:"flex items-center gap-2 p-3 text-sm bg-red-50 border border-red-200 text-red-800 rounded-lg",children:[e.jsx(F,{className:"w-4 h-4"})," ",a]}),m&&i&&e.jsx(O,{summary:i}),e.jsx(G,{prizes:n,onSubmit:x,isSubmitting:c,isPrizesLoading:l})]})]})})}export{U as default};
