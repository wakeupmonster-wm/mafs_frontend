import{j as e,J as W,ah as E,r as h,H as L,z as u,B as P,W as R,Y as A,E as N,a as j,Z as B,$ as G,a0 as $,a1 as H,_ as O,a2 as U,a3 as V,a4 as v,a5 as K,a6 as J,a7 as T,i as X,A as b,ap as Y,aq as M,ar as Z}from"./index-Cah9GgNi.js";import{P as _}from"./headSubhead-C7X6Yce6.js";import{S as Q,a as ee,b as ae,c as se,d as te}from"./select-DxUcbfzd.js";import ie from"./prizes.page-C5pKqb12.js";import re from"./campaigns.page-BDO5lNfB.js";import ne from"./bulk.campaign.page-p605TVEG.js";import{A as le}from"./arrow-up-down-CNYF-QmJ.js";import{G as k}from"./gift-CJDpdJoS.js";import{C as oe}from"./circle-alert-CnaEjTQV.js";import{U as ce}from"./user-D1L96pnc.js";import{C as de}from"./circle-check-big-ChBinIN1.js";import{C as I}from"./clock-BveIEetd.js";import{f as me}from"./formatDistanceToNow-SCnc4N16.js";import{u as xe,f as z,a as pe,b as he,c as ge,g as ue}from"./index-BXaOFAvc.js";import{L as be}from"./label-DJ1n1SI_.js";import{T as je,D as fe}from"./data.not-found-BokaeWBd.js";import{I as we,a as y}from"./IconX-D4kkSzeq.js";import{A as C}from"./index-Eb3V4Lej.js";import{I as Ne}from"./IconFilter-D5y8yHeQ.js";import{U as F}from"./users-DY5vQYIt.js";import{A as S}from"./award-CjYD8FNm.js";import ve from"./pending.deliveries.page-BkSKSLBN.js";import ye from"./participants.page-pqlVD3Qo.js";import{L as Ce}from"./layout-dashboard-FOmRIJ3F.js";import{T as Se,P as ke}from"./truck-Dz2wWr1L.js";import{C as Pe}from"./crown-4cfT-ZjR.js";import{T as D}from"./trophy-CRuQjySU.js";import{M as q}from"./pen-EW22sn6S.js";import"./sparkles-CJxx7LU5.js";import"./ellipsis-BTTzz4hy.js";import"./square-pen-oprSd4Jm.js";import"./trash-Cukg421D.js";import"./circle-dollar-sign-U1pwusAR.js";import"./dialog-CgcypPnB.js";import"./loader-circle-D_OERo1u.js";import"./ConfirmModal-FgUfmtBl.js";import"./triangle-alert-1qeuYxI_.js";import"./plus-DCZtzpkq.js";import"./parseISO-CSd47LLW.js";import"./info-CpdJOb3o.js";import"./endOfMonth-D35K41iH.js";import"./index-657d2hlm.js";import"./IconLoader-QBct0fFV.js";import"./chevron-left-IoiNEKJ3.js";const Te=()=>[{accessorKey:"date",header:({column:i})=>e.jsxs("button",{className:"flex items-center hover:text-gray-900 transition-colors",onClick:()=>i.toggleSorting(i.getIsSorted()==="asc"),children:["Campaign Date",e.jsx(le,{className:"ml-2 h-3 w-3 opacity-50"})]}),cell:({row:i})=>{const s=i.original?.date;if(!s)return e.jsx("span",{className:"text-sm text-slate-400 italic",children:"â€”"});const l=new Date(s);return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium text-slate-900",children:me(l,{addSuffix:!0})}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-500",children:[e.jsx(W,{className:"h-2.5 w-2.5 opacity-70"}),e.jsx("span",{children:E(l,"MMM dd, yyyy p")})]})]})}},{accessorKey:"prize.title",header:"Prize",cell:({row:i})=>{const s=i.original.prize;return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(k,{className:"h-4 w-4 text-gray-900 transition-transform group-hover:scale-110"}),e.jsx("span",{className:"font-semibold text-gray-800",children:s?.title||"No Prize"})]}),s?.value&&e.jsxs("span",{className:"text-[10px] text-gray-400 ml-6",children:["Value: ",s.value]})]})}},{accessorKey:"winner",header:"Winner",cell:({row:i})=>{const s=i.original.winner,l=i.original.drawStatus;return s?e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(ce,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-700",children:s.phone||"No Phone"}),e.jsx("span",{className:"text-[10px] text-gray-400",children:s.email||""})]})]}):l==="COMPLETED"?e.jsxs("div",{className:"flex items-center gap-1 text-amber-600 italic text-xs",children:[e.jsx(oe,{className:"h-3 w-3"})," No Winner Found"]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"Waiting for draw..."})}},{accessorKey:"drawStatus",header:"Status",cell:({row:i})=>{const s=i.original.drawStatus,l={COMPLETED:"bg-emerald-50 text-emerald-700 border-emerald-200",PENDING:"bg-amber-50 text-amber-700 border-amber-200",PROCESSING:"bg-blue-50 text-blue-700 border-blue-200"};return e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider ${l[s]||"bg-gray-50 text-gray-600"}`,children:[s==="COMPLETED"?e.jsx(de,{className:"h-3 w-3"}):e.jsx(I,{className:"h-3 w-3"}),s]})}}];function ze({columns:i,data:s,rowCount:l,pagination:g,onPaginationChange:o,searchPlaceholder:m="Search...",globalFilter:x,setGlobalFilter:d,isLoading:r,filters:n}){const[f,w]=h.useState([]),c=xe({data:s,columns:i,rowCount:l,state:{sorting:f,pagination:g,globalFilter:x},onSortingChange:w,onPaginationChange:o,onGlobalFilterChange:d,getCoreRowModel:ue(),getSortedRowModel:ge(),manualPagination:!0,manualFiltering:!0,manualSorting:!1}),t=n.statusFilter;return e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row md:items-center justify-between gap-4 bg-slate-50/50 p-2 rounded-xl",children:[e.jsxs("div",{className:"relative w-3/5 md:w-1/3",children:[e.jsx(we,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 z-10"}),e.jsx(L,{placeholder:m,className:"pl-9 pr-10 bg-white border-slate-200 h-10 shadow-md focus-visible:ring-brand-aqua rounded-lg",value:x??"",onChange:a=>d(a.target.value)}),x&&e.jsx("button",{onClick:()=>d(""),className:"absolute right-3 top-1/2 -translate-y-1/2 group flex items-center justify-center rounded-full p-1 bg-brand-aqua/30 hover:bg-brand-aqua transition-colors duration-200","aria-label":"Clear search",children:e.jsx(y,{className:"h-4 w-4 text-slate-600 group-hover:text-slate-800 transition-colors"})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 min-w-0 flex-1 ml-4",children:[e.jsx("div",{className:"hidden sm:flex flex-1 items-center justify-end gap-2 overflow-x-hidden min-w-0",children:e.jsx(C,{mode:"popLayout",children:t&&e.jsx(u.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,scale:.95},className:"shrink-0",children:e.jsxs(P,{variant:"secondary",className:"p-2 gap-1 bg-indigo-100 border-dashed border-indigo-400 text-indigo-700 shadow-sm whitespace-nowrap",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase opacity-50",children:"Status:"}),e.jsx("span",{className:"capitalize text-xs",children:n.statusFilter}),e.jsx("button",{onClick:()=>n.setStatusFilter(""),className:"ml-1 p-0.5 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(y,{size:12})})]})},"status-chip")})}),t&&e.jsx("div",{className:"hidden sm:block w-0.5 h-6 bg-slate-200 shrink-0"}),e.jsx("div",{className:"shrink-0",children:e.jsxs(R,{children:[e.jsx(A,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:j("h-10 border-brand-aqua/80 shadow-sm bg-brand-aqua/5 hover:bg-brand-aqua/30 transition-all whitespace-nowrap",t&&"border-brand-aqua ring-1 ring-brand-aqua"),children:[e.jsx(Ne,{strokeWidth:2.5,className:j("h-6 w-6",t?"text-brand-aqua":"text-brand-aqua/60")}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filters"}),t&&e.jsx("span",{className:"ml-2 flex h-5 w-5 items-center justify-center rounded-full bg-brand-aqua text-[10px] text-white font-bold",children:+!!n.statusFilter})]})}),e.jsxs(B,{align:"end",className:"w-44 p-2 shadow-xl",children:[e.jsx(G,{className:"text-xs text-slate-500 font-bold uppercase",children:"Winner Status:"}),["PENDING","COMPLETED"].map(a=>e.jsx($,{className:"capitalize",checked:n.statusFilter===a,onCheckedChange:()=>n.setStatusFilter(a),children:a.toLowerCase()},a)),t&&e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(O,{className:"text-red-600 justify-center font-medium focus:bg-red-50 focus:text-red-700 cursor-pointer",onClick:()=>{n.setStatusFilter("")},children:"Clear All Filters"})]})]})]})})]})]}),e.jsx("div",{className:"flex justify-end sm:hidden flex-wrap gap-2 px-1",children:e.jsx(C,{children:t&&e.jsx(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-wrap items-center gap-2",children:n.statusFilter&&e.jsxs(P,{variant:"secondary",className:"bg-indigo-50 text-indigo-700 border-indigo-100 py-1",children:["Status:",e.jsx("span",{className:"capitalize ml-1",children:n.statusFilter}),e.jsx("button",{onClick:()=>n.setStatusFilter(""),className:"ml-1",children:e.jsx(y,{size:12})})]})})})})]}),e.jsx("div",{className:"block rounded-xl border border-slate-200 bg-white shadow-sm overflow-hidden",children:e.jsxs(U,{children:[e.jsx(V,{className:"bg-slate-50/50",children:c.getHeaderGroups().map(a=>e.jsx(v,{children:a.headers.map(p=>e.jsx(K,{className:"text-slate-700 w-max pl-10 font-semibold h-10 bg-slate-100 text-xs",children:z(p.column.columnDef.header,p.getContext())},p.id))},a.id))}),e.jsx(J,{className:j(r&&"opacity-50 pointer-events-none transition-opacity"),children:c.getRowModel().rows?.length?c.getRowModel().rows.map(a=>e.jsx(v,{className:"hover:bg-slate-50/50",children:a.getVisibleCells().map(p=>e.jsx(T,{className:"py-3 pl-10",children:z(p.column.columnDef.cell,p.getContext())},p.id))},a.id)):e.jsx(v,{children:e.jsx(T,{colSpan:i.length,className:"h-64 text-center",children:r?e.jsx(je,{text:"Fetching Campaigns..."}):e.jsx(fe,{message:"No campaigns found"})})})})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 py-2 border-t border-slate-100 mt-4 px-5 md:px-0",children:[e.jsxs("div",{className:"text-xs font-medium text-slate-500",children:["Showing ",s.length," of ",l," results"]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"hidden sm:block text-[10px] font-bold text-slate-400 uppercase",children:"Rows"}),e.jsxs(Q,{value:`${c.getState().pagination.pageSize}`,onValueChange:a=>c.setPageSize(Number(a)),children:[e.jsx(ee,{className:"h-8 w-[70px] text-xs",children:e.jsx(ae,{})}),e.jsx(se,{children:[10,20,50].map(a=>e.jsx(te,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>c.previousPage(),disabled:!c.getCanPreviousPage(),children:e.jsx(pe,{size:16})}),e.jsxs("div",{className:"text-xs font-semibold px-2",children:[c.getState().pagination.pageIndex+1," /"," ",c.getPageCount()]}),e.jsx(N,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>c.nextPage(),disabled:!c.getCanNextPage(),children:e.jsx(he,{size:16})})]})]})]})]})}function De(){const i=X(),{winner:s,stats:l,pagination:g,loading:o}=b(t=>t.winner),[m,x]=h.useState({pageIndex:0,pageSize:10}),[d,r]=h.useState(""),[n,f]=h.useState("");h.useEffect(()=>{const t=setTimeout(()=>{i(Y({page:m.pageIndex+1,limit:m.pageSize,search:d,status:n}))},400);return()=>clearTimeout(t)},[i,m.pageIndex,m.pageSize,d,n]);const w=h.useMemo(()=>Te(),[]),c=[{label:"Total Campaigns",value:l?.totalCampaigns||0,icon:M,color:"text-blue-600",bg:"bg-blue-50"},{label:"Completed",value:l?.completed||0,icon:Z,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Pending",value:l?.pending||0,icon:I,color:"text-amber-600",bg:"bg-amber-50"},{label:"Winners",value:l?.withWinner||0,icon:F,color:"text-indigo-600",bg:"bg-indigo-50"}];return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-brand-aqua p-3 rounded-xl shadow-lg",children:e.jsx(S,{className:"h-5 w-5 text-white animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Campaign Winners"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track all giveaway results"})]})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:c.map((t,a)=>e.jsxs("div",{className:"bg-white border border-slate-200 p-4 rounded-2xl shadow-sm flex items-center gap-4 hover:border-slate-300 transition-all",children:[e.jsx("div",{className:`p-3 rounded-xl ${t.bg}`,children:e.jsx(t.icon,{className:`h-5 w-5 ${t.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold uppercase tracking-wider text-slate-400",children:t.label}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:o?"...":t.value})]})]},a))}),e.jsx("div",{className:"overflow-hidden",children:e.jsx(ze,{columns:w,data:s||[],rowCount:g?.total||0,isLoading:o,pagination:m,onPaginationChange:x,globalFilter:d,setGlobalFilter:t=>{r(t),x(a=>({...a,pageIndex:0}))},searchPlaceholder:"Search by prize title, phone, email...",filters:{statusFilter:n,setStatusFilter:t=>{f(t),x(a=>({...a,pageIndex:0}))}}})})]})}const qe=[{key:"prizes",label:"Prizes",icon:k},{key:"campaigns",label:"Campaigns",icon:Ce},{key:"bulk",label:"Bulk",icon:M},{key:"deliveries",label:"Deliveries",icon:Se},{key:"winner",label:"Winners",icon:Pe},{key:"participants",label:"Participants",icon:F}];function va(){const{prizes:i}=b(r=>r.prize),{campaigns:s}=b(r=>r.campaign),{deliveries:l}=b(r=>r.delivery),{winner:g}=b(r=>r.winner),[o,m]=h.useState("prizes"),d=(()=>{switch(o){case"prizes":return{count:i?.length||0,label:"Total Prizes",icon:e.jsx(D,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})};case"campaigns":return{count:s?.length||0,label:"Total Campaigns",icon:e.jsx(q,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})};case"bulk":return{count:s?.length||0,label:"Total Campaigns",icon:e.jsx(q,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})};case"deliveries":return{count:l?.length||0,label:"Pending Deliveries",icon:e.jsx(ke,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})};case"winner":return{count:g?.length||0,label:"Total Winners",icon:e.jsx(S,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})};case"participants":return{count:g?.length||0,label:"Total Winners",icon:e.jsx(S,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})};default:return{count:0,label:"Items",icon:e.jsx(D,{className:"w-5 h-5 text-brand-aqua",strokeWidth:2.5})}}})();return e.jsx("div",{className:"flex flex-1 flex-col min-h-screen p-4 bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100 pb-8",children:e.jsxs(u.div,{className:"max-w-7xl mx-auto w-full space-y-8",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 px-2",children:[e.jsx(_,{heading:"Giveaway Management",icon:e.jsx(k,{className:"w-9 h-9 text-white animate-pulse"}),color:"bg-brand-aqua shadow-brand-aqua/40",subheading:"Manage prizes, campaigns, winners and deliveries from one centralized admin panel."}),e.jsx("div",{className:"gap-4 hidden lg:flex",children:e.jsxs(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-brand-aqua/20 p-2 rounded-xl border border-brand-aqua shadow-sm flex items-center gap-3 min-w-[140px]",children:[e.jsx("div",{className:"p-2 rounded-lg",children:d.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[12px] text-slate-600 font-bold uppercase leading-tight",children:d.label}),e.jsxs("p",{className:"text-[11px] font-bold text-slate-800",children:[d.count," ",o==="winner"?"Records":"Items"]})]})]},o)})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex items-center gap-1 p-1.5 bg-slate-200/50 backdrop-blur-md rounded-2xl w-fit border border-slate-200/60 overflow-x-auto no-scrollbar",children:qe.map(r=>{const n=o===r.key;return e.jsxs("button",{onClick:()=>m(r.key),className:j("relative flex items-center gap-2 px-5 py-2.5 text-sm font-semibold transition-all duration-300 rounded-xl",n?"text-brand-aqua":"text-slate-500 hover:text-slate-700 hover:bg-slate-300/30"),children:[e.jsx(r.icon,{className:j("w-4 h-4",n?"text-brand-aqua":"text-slate-400")}),r.label,n&&e.jsx(u.div,{layoutId:"activeTab",className:"absolute inset-0 bg-white shadow-sm border border-indigo-100 rounded-xl -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},r.key)})})}),e.jsx(C,{mode:"wait",children:e.jsx(u.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:e.jsxs("main",{className:"relative h-max bg-white/40 backdrop-blur-sm rounded-3xl border border-slate-200/80 p-1 md:p-2 shadow-sm",children:[o==="prizes"&&e.jsx(ie,{}),o==="campaigns"&&e.jsx(re,{}),o==="bulk"&&e.jsx(ne,{}),o==="deliveries"&&e.jsx(ve,{}),o==="winner"&&e.jsx(De,{}),o==="participants"&&e.jsx(ye,{})]})},o)})]})})}export{va as default};
