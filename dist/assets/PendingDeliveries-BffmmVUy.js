import{i as j,A as N,r,aF as g,j as e,C as b,E as v,aG as w}from"./index-Cah9GgNi.js";import{P as f,T as D}from"./truck-Dz2wWr1L.js";import{C as n}from"./circle-check-big-ChBinIN1.js";import{C}from"./circle-alert-CnaEjTQV.js";import{L as h}from"./loader-circle-D_OERo1u.js";import{C as S}from"./clock-BveIEetd.js";function M(){const t=j(),{pendingDeliveries:d,loading:p}=N(a=>a.giveaway),[c,m]=r.useState({}),[o,i]=r.useState(""),[x,l]=r.useState("");r.useEffect(()=>{t(g())},[t]);const u=async a=>{m(s=>({...s,[a]:!0})),l(""),i("");try{await t(w(a)).unwrap(),i("Prize marked as delivered successfully"),t(g())}catch(s){l(s?.message||"Something went wrong")}finally{m(s=>({...s,[a]:!1})),setTimeout(()=>{i(""),l("")},3e3)}},y=a=>a.deliveryStatus==="DELIVERED"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200 animate-in fade-in slide-in-from-left-2 duration-300",children:[e.jsx(n,{className:"w-3.5 h-3.5"}),"Delivered"]}):a.claimedAt?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200 animate-in fade-in slide-in-from-left-2 duration-300",children:[e.jsx(D,{className:"w-3.5 h-3.5 animate-bounce"}),"Claimed"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full bg-gray-100 text-gray-500 border border-gray-200 animate-in fade-in slide-in-from-left-2 duration-300",children:[e.jsx(S,{className:"w-3.5 h-3.5 animate-pulse"}),"Not Claimed"]});return e.jsxs(b,{className:"p-6 shadow-sm border border-gray-200 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(f,{className:"w-5 h-5 text-gray-700"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Prize Delivery Management"})]}),o&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-300 rounded-lg flex items-center gap-3 text-gray-800 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsx(n,{className:"w-5 h-5 text-gray-700 animate-bounce"}),e.jsx("span",{className:"font-medium",children:o})]}),x&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-400 rounded-lg flex items-center gap-3 text-gray-800 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsx(C,{className:"w-5 h-5 text-gray-700 animate-pulse"}),e.jsx("span",{className:"font-medium",children:x})]}),p?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"w-10 h-10 animate-spin text-gray-600"}),e.jsx("div",{className:"absolute inset-0 w-10 h-10 border-2 border-gray-200 rounded-full animate-ping"})]}),e.jsx("p",{className:"text-sm text-gray-500 animate-pulse",children:"Loading deliveries..."})]}):e.jsxs("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700",children:"User"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700",children:"Prize"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700",children:"Campaign Date"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"p-4 text-right font-semibold text-gray-700",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d?.map((a,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-all duration-200 animate-in fade-in slide-in-from-bottom-1",style:{animationDelay:`${s*50}ms`},children:[e.jsx("td",{className:"p-4 font-medium text-gray-800",children:a.userId?.phone||a.userId?.email||"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-800",children:a.prizeId?.title}),a.prizeId?.value&&e.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:a.prizeId.value})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:a.campaignId?.date?new Date(a.campaignId.date).toDateString():"-"}),e.jsx("td",{className:"p-4",children:y(a)}),e.jsx("td",{className:"p-4 text-right",children:a.deliveryStatus==="PENDING"&&a.claimedAt?e.jsx(v,{size:"sm",onClick:()=>u(a._id),disabled:c[a._id],className:"bg-gray-800 hover:bg-gray-700 text-white transition-all duration-200 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:c[a._id]?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-3.5 h-3.5 animate-spin"}),"Processing"]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-3.5 h-3.5"}),"Mark Delivered"]})}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No Action"})})]},a._id))})]})}),d?.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-3 animate-in fade-in zoom-in-50 duration-500",children:[e.jsx(f,{className:"w-12 h-12 text-gray-300 animate-pulse"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No delivery records found"})]})]})]})}export{M as default};
