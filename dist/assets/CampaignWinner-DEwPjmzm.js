import{i as D,A as E,r,ax as C,aE as S,j as e,C as L,B as l,E as P,J as u}from"./index-Cah9GgNi.js";import{A as f}from"./award-CjYD8FNm.js";import{F as M}from"./funnel-BV6wJkk7.js";import{T as o}from"./trophy-CRuQjySU.js";import{C as N}from"./clock-BveIEetd.js";import{C as T}from"./circle-alert-CnaEjTQV.js";import{L as A}from"./loader-circle-D_OERo1u.js";import{G as j}from"./gift-CJDpdJoS.js";import{U as y}from"./user-D1L96pnc.js";function U(){const d=D(),{campaigns:t,winner:i,loading:v,error:c}=E(a=>a.giveaway),[n,b]=r.useState(""),[x,w]=r.useState("");r.useEffect(()=>{d(C()).catch(()=>w("Failed to load campaigns"))},[d]),r.useEffect(()=>{if(!t?.length)return;t.filter(s=>s.drawStatus==="COMPLETED"&&s.winnerUserId).forEach(s=>{d(S(s._id))})},[t,d]);const m=r.useMemo(()=>i?n==="COMPLETED"?i.filter(a=>a.drawStatus==="COMPLETED"):n==="PENDING"?t?.filter(a=>a.drawStatus==="PENDING").map(a=>({campaignId:a._id,date:a.date,prize:a.prizeId,winner:null,drawAt:null,drawStatus:"PENDING"})):i:[],[n,i,t]),h=r.useMemo(()=>i?.filter(a=>a.drawStatus==="COMPLETED").length||0,[i]),g=r.useMemo(()=>t?.filter(a=>a.drawStatus==="PENDING").length||0,[t]),p=a=>a==="COMPLETED"?e.jsxs(l,{className:"bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center gap-1.5 px-2.5 py-1 transition-all duration-200 hover:scale-105",children:[e.jsx(o,{className:"w-3 h-3"}),"Completed"]}):e.jsxs(l,{className:"bg-amber-100 text-amber-700 border border-amber-200 flex items-center gap-1.5 px-2.5 py-1 transition-all duration-200 hover:scale-105",children:[e.jsx(N,{className:"w-3 h-3 animate-pulse"}),"Pending"]});return e.jsx("div",{className:"min-h-screen  p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs(L,{className:" overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-700 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"border-b border-gray-100  p-5",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-left-2 duration-500",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 shadow-md animate-in zoom-in-50 duration-500",children:e.jsx(f,{className:"h-5 w-5 text-white animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Campaign Winners"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Track all giveaway results"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 animate-in fade-in slide-in-from-right-2 duration-500",style:{animationDelay:"100ms"},children:[e.jsxs(l,{variant:"secondary",className:"bg-gray-900 text-white border border-gray-800",children:[m.length," Total"]}),h>0&&e.jsxs(l,{className:"bg-emerald-100 text-emerald-700 border border-emerald-200",children:[h," Completed"]}),g>0&&e.jsxs(l,{className:"bg-amber-100 text-amber-700 border border-amber-200",children:[g," Pending"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 animate-in fade-in slide-in-from-bottom-2 duration-500",style:{animationDelay:"150ms"},children:[e.jsx(M,{className:"h-4 w-4 text-gray-400"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["ALL","COMPLETED","PENDING"].map((a,s)=>e.jsxs(P,{size:"sm",variant:n===a?"default":"outline",onClick:()=>b(a),className:`transition-all duration-200 hover:scale-105 ${n===a?"bg-gray-900 hover:bg-gray-800 shadow-md":"border-gray-300 hover:bg-gray-50"}`,style:{animationDelay:`${s*50}ms`},children:[a==="ALL"&&e.jsx(o,{className:"w-3 h-3 mr-1.5"}),a==="COMPLETED"&&e.jsx(f,{className:"w-3 h-3 mr-1.5"}),a==="PENDING"&&e.jsx(N,{className:"w-3 h-3 mr-1.5"}),a]},a))})]})]}),e.jsxs("div",{className:"p-0",children:[(c||x)&&e.jsxs("div",{className:"m-5 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3 text-red-800 animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsx(T,{className:"w-5 h-5 flex-shrink-0 animate-pulse"}),e.jsx("span",{className:"font-medium",children:c||x})]}),v?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 animate-in fade-in zoom-in-50 duration-700",children:[e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"w-10 h-10 animate-spin text-gray-900"}),e.jsx("div",{className:"absolute inset-0 w-10 h-10 border-2 border-gray-200 rounded-full animate-ping"})]}),e.jsx("p",{className:"mt-4 text-sm font-medium text-gray-600 animate-pulse",children:"Loading campaign winners..."})]}):m.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50/80 text-xs font-medium uppercase tracking-wider text-gray-500",children:[e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Campaign Date"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Prize"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Winner"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Draw Date"}),e.jsx("th",{className:"px-5 py-3.5 text-left",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:m.map((a,s)=>e.jsxs("tr",{className:"transition-all duration-200 hover:bg-gray-50/80 hover:shadow-sm animate-in fade-in slide-in-from-bottom-1",style:{animationDelay:`${s*50}ms`},children:[e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(u,{className:"h-4 w-4 text-gray-400 transition-all duration-200 group-hover:text-gray-600 group-hover:scale-110"}),e.jsx("span",{className:"font-medium text-gray-700 transition-colors duration-200 group-hover:text-gray-900",children:a.date?new Date(a.date).toDateString():"—"})]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(j,{className:"h-4 w-4 text-gray-900 transition-all duration-200 group-hover:scale-110"}),e.jsx("span",{className:"font-semibold text-gray-800 transition-colors duration-200 group-hover:text-gray-900",children:a.prize?.title||"—"})]})}),e.jsx("td",{className:"px-5 py-4",children:a.winner?e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(y,{className:"h-4 w-4 text-blue-600 transition-all duration-200 group-hover:scale-110"}),e.jsx("span",{className:"font-medium text-gray-700 transition-colors duration-200 group-hover:text-gray-900",children:a.winner.phone||a.winner.email})]}):e.jsx("span",{className:"text-sm text-gray-400 italic",children:"No winner yet"})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:a.drawAt?new Date(a.drawAt).toLocaleString():"—"})}),e.jsx("td",{className:"px-5 py-4",children:p(a.drawStatus)})]},a.campaignId))})]})}),e.jsx("div",{className:"divide-y divide-gray-100 md:hidden",children:m.map((a,s)=>e.jsx("div",{className:"p-4 transition-all duration-200 hover:bg-gray-50/80 animate-in fade-in slide-in-from-bottom-2",style:{animationDelay:`${s*50}ms`},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 transition-all duration-200 group-hover:bg-gray-200 group-hover:scale-110",children:e.jsx(j,{className:"h-4 w-4 text-gray-900"})}),e.jsx("span",{className:"font-semibold text-gray-800 transition-colors duration-200 group-hover:text-gray-900",children:a.prize?.title||"—"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(u,{className:"h-3.5 w-3.5 text-gray-400"}),e.jsxs("span",{children:["Campaign:"," ",a.date?new Date(a.date).toDateString():"—"]})]}),a.winner&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(y,{className:"h-3.5 w-3.5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-700",children:a.winner.phone||a.winner.email})]}),a.drawAt&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Draw Date: ",new Date(a.drawAt).toLocaleString()]}),e.jsx("div",{className:"flex items-center gap-2 pt-2",children:p(a.drawStatus)})]})},a.campaignId))})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400 animate-in fade-in zoom-in-50 duration-700",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 animate-bounce",children:e.jsx(o,{className:"h-8 w-8"})}),e.jsx("p",{className:"mt-4 text-sm font-semibold text-gray-600",children:"No data for selected filter"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Try selecting a different filter option"})]})]})]})})})}export{U as default};
